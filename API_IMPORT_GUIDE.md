# 接口导入功能使用指南

## 功能概述

接口导入功能允许您通过上传接口文档文件，使用大模型自动分析和整理接口信息，并批量导入到系统中。支持多种大模型和文档格式，实现流式输出展示导入过程。

## 支持的大模型

- **通义千问** (阿里云) - qwen-max, qwen-plus, qwen-turbo
- **DeepSeek** - deepseek-chat, deepseek-coder  
- **豆包** (字节跳动) - doubao-pro-4k, doubao-pro-32k, doubao-lite-4k
- **Gemini** (Google) - gemini-pro, gemini-pro-vision
- **自定义** - 支持OpenAI兼容接口

## 支持的文档格式

- **文本文件**: .txt, .md (Markdown)
- **Word文档**: .docx
- **Excel表格**: .xlsx, .xls
- **网页文件**: .html, .htm
- **JSON文件**: .json
  - OpenAPI/Swagger规范
  - Postman集合文件
  - 普通JSON格式

## 使用步骤

### 第一步：配置大模型

1. 选择大模型提供商
2. 选择具体模型（系统会自动选择默认模型）
3. 输入API Key
4. 配置API地址（可选，不填使用默认地址）
5. 点击"配置并测试连接"

**注意事项：**
- API Key需要有效且有足够的调用额度
- 不同提供商的API Key格式不同，请根据占位符提示输入
- 测试连接成功后才能进行下一步

### 第二步：上传文档

1. 拖拽文件到上传区域或点击选择文件
2. 支持的文件格式见上方列表
3. 文件大小限制：10MB以内
4. 系统会自动解析文档内容并显示解析结果
5. 确认解析成功后点击"开始分析"

**文档建议：**
- Markdown格式的API文档效果最好
- OpenAPI/Swagger JSON文件可直接解析
- Word文档请确保格式规范，包含清晰的接口定义
- Excel文档请使用标准的API文档模板

### 第三步：智能分析

1. 系统使用选定的大模型分析文档
2. 实时显示分析进度和日志
3. 流式展示发现的API接口
4. 分析完成后显示所有发现的接口
5. 可以选择重新分析或继续下一步

**分析过程：**
- 大模型会识别HTTP方法、路径、参数、响应等信息
- 支持识别RESTful API、GraphQL等多种接口类型
- 自动提取接口描述、标签、安全配置等元数据
- 分析结果实时展示，支持中断和重试

### 第四步：确认保存

1. 选择目标项目
2. 查看解析出的接口列表
3. 选择要导入的接口（支持多选）
4. 确认接口信息无误后点击导入
5. 系统会批量保存到数据库

**确认要点：**
- 检查接口路径和方法是否正确
- 确认参数定义是否完整
- 查看接口描述和标签是否合适
- 避免导入重复的接口

## 配置示例

### 通义千问配置
```
提供商：通义千问
模型：qwen-max
API Key：sk-xxx（从阿里云DashScope获取）
API地址：https://dashscope.aliyuncs.com/api/v1
```

### DeepSeek配置
```
提供商：DeepSeek
模型：deepseek-chat
API Key：sk-xxx（从DeepSeek官网获取）
API地址：https://api.deepseek.com/v1
```

### 豆包配置
```
提供商：豆包
模型：doubao-pro-4k
API Key：YOUR_API_KEY（从火山引擎获取）
API地址：https://ark.cn-beijing.volces.com/api/v3
```

## 常见问题

### Q1：大模型配置失败
- 检查API Key是否正确
- 确认网络连接正常
- 验证API地址是否正确
- 检查账户余额是否充足

### Q2：文档解析失败
- 确认文件格式是否支持
- 检查文件是否损坏
- 文件大小是否超过限制
- 文档内容是否包含接口信息

### Q3：分析结果不准确
- 尝试使用不同的大模型
- 优化文档格式和内容
- 检查文档中的接口描述是否清晰
- 可以手动调整分析结果

### Q4：导入接口重复
- 在确认步骤仔细检查接口列表
- 系统不会自动去重，需要手动筛选
- 建议按项目分批导入

## 最佳实践

1. **文档准备**
   - 使用标准的API文档格式
   - 确保接口描述清晰完整
   - 包含完整的参数和响应定义

2. **模型选择**
   - 对于中文文档，推荐使用通义千问
   - 对于代码类文档，推荐使用DeepSeek Coder
   - 复杂文档可以尝试多个模型对比

3. **批量导入**
   - 按项目模块分批导入
   - 先导入核心接口，再导入辅助接口
   - 定期备份导入的数据

4. **质量控制**
   - 导入后及时验证接口信息
   - 补充缺失的参数和响应定义
   - 整理接口分类和标签

## 技术说明

### 后端技术栈
- FastAPI - Web框架
- SQLAlchemy - ORM
- 多种大模型SDK集成
- 异步流式处理

### 前端技术栈  
- Vue 3 + TypeScript
- Element Plus UI组件
- Server-Sent Events (SSE) 流式更新
- 响应式设计

### 数据库字段
新增的API表字段：
- `path` - 接口路径
- `parameters` - 参数列表 (JSON)
- `responses` - 响应定义 (JSON)
- `tags` - 标签 (JSON)
- `security` - 安全配置 (JSON)
- `notes` - 备注
- `project_id` - 项目ID

## 更新日志

### v1.0.0 (当前版本)
- ✅ 支持5种主流大模型
- ✅ 支持6种文档格式
- ✅ 流式分析展示
- ✅ 批量接口导入
- ✅ 完整的错误处理

### 计划功能
- 🔄 API文档模板
- 🔄 导入历史记录
- �� 批量编辑功能
- 🔄 接口去重检测 