<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIÊµãËØïÂπ≥Âè∞ - ÁßëÂπªÁâà</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e6ed;
            overflow-x: hidden;
        }

        /* ÁßëÂπªËÉåÊôØÂä®Áîª */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, #00d4ff 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, #ff0080 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, #8000ff 0%, transparent 50%);
            animation: pulse 4s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            0% { opacity: 0.1; }
            100% { opacity: 0.3; }
        }

        /* ‰∏ªÂÆπÂô® */
        .container {
            display: flex;
            height: 100vh;
        }

        /* Â∑¶‰æßËèúÂçï */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #1e1e2e 0%, #2d2d44 100%);
            border-right: 2px solid #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
            overflow-y: auto;
        }

        .logo {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #444;
            background: linear-gradient(45deg, #00d4ff, #8000ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo h1 {
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .menu-section {
            margin: 20px 0;
        }

        .menu-title {
            padding: 15px 20px;
            font-size: 16px;
            font-weight: bold;
            color: #00d4ff;
            border-left: 4px solid #00d4ff;
            background: rgba(0, 212, 255, 0.1);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .menu-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            position: relative;
        }

        .menu-item:hover {
            background: linear-gradient(90deg, rgba(0, 212, 255, 0.2), transparent);
            border-left-color: #00d4ff;
            transform: translateX(5px);
        }

        .menu-item.active {
            background: linear-gradient(90deg, rgba(0, 212, 255, 0.3), transparent);
            border-left-color: #00d4ff;
            color: #00d4ff;
        }

        .submenu {
            padding-left: 40px;
            font-size: 14px;
            color: #b0b0b0;
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫ */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* È°∂ÈÉ®Â∑•ÂÖ∑Ê†è */
        .toolbar {
            height: 60px;
            background: linear-gradient(90deg, #2d2d44, #3d3d54);
            border-bottom: 2px solid #00d4ff;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .config-section {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .config-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-item label {
            color: #00d4ff;
            font-weight: bold;
        }

        .config-input {
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00d4ff;
            border-radius: 4px;
            color: #e0e6ed;
            font-size: 14px;
        }

        .config-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        /* ÂÜÖÂÆπÈù¢Êùø */
        .content-panel {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .panel-header {
            margin-bottom: 20px;
        }

        .panel-title {
            font-size: 24px;
            color: #00d4ff;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .panel-subtitle {
            color: #b0b0b0;
            font-size: 14px;
        }

        /* ÊµãËØïÁ±ªÂûãÈÄâÊã© */
        .test-types {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .test-type-card {
            flex: 1;
            padding: 20px;
            background: linear-gradient(135deg, #2d2d44, #3d3d54);
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .test-type-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .test-type-card:hover::before {
            left: 100%;
        }

        .test-type-card:hover {
            border-color: #00d4ff;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
        }

        .test-type-card.active {
            border-color: #00d4ff;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(128, 0, 255, 0.2));
        }

        .test-type-icon {
            font-size: 32px;
            margin-bottom: 10px;
            color: #00d4ff;
        }

        .test-type-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .test-type-desc {
            font-size: 12px;
            color: #b0b0b0;
        }

        /* Êé•Âè£ÂàóË°® */
        .api-list {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .api-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .api-list-title {
            font-size: 18px;
            color: #00d4ff;
        }

        .api-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: linear-gradient(90deg, rgba(45, 45, 68, 0.5), rgba(61, 61, 84, 0.5));
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .api-item:hover {
            background: linear-gradient(90deg, rgba(0, 212, 255, 0.1), rgba(128, 0, 255, 0.1));
            border-left-color: #00d4ff;
            transform: translateX(5px);
        }

        .api-method {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 15px;
            min-width: 60px;
            text-align: center;
        }

        .method-get { background: #28a745; }
        .method-post { background: #007bff; }
        .method-put { background: #ffc107; color: #000; }
        .method-delete { background: #dc3545; }

        .api-info {
            flex: 1;
        }

        .api-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .api-url {
            font-size: 12px;
            color: #b0b0b0;
            font-family: 'Courier New', monospace;
        }

        .api-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }

        .status-ready { background: #28a745; }
        .status-testing { background: #ffc107; color: #000; }
        .status-success { background: #28a745; }
        .status-failed { background: #dc3545; }

        /* ÊåâÈíÆÊ†∑Âºè */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, #0099cc, #00d4ff);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(45deg, #20c997, #28a745);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
            transform: translateY(-2px);
        }

        .btn-warning {
            background: linear-gradient(45deg, #ffc107, #fd7e14);
            color: #000;
        }

        .btn-warning:hover {
            background: linear-gradient(45deg, #fd7e14, #ffc107);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.4);
            transform: translateY(-2px);
        }

        /* ÊµãËØïÁªìÊûúÈù¢Êùø */
        .test-results {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #444;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .result-title {
            color: #00d4ff;
            font-size: 18px;
        }

        .result-stats {
            display: flex;
            gap: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #00d4ff;
        }

        .stat-label {
            font-size: 12px;
            color: #b0b0b0;
        }

        /* Êé•Âè£ÈÄâÊã©ÂÆπÂô® */
        .api-selection-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .available-apis, .selected-apis {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
        }

        .available-apis {
            border: 2px solid #00d4ff;
        }

        .selected-apis {
            border: 2px solid #28a745;
        }

        .api-item-selectable {
            display: flex;
            align-items: center;
            padding: 15px;
            background: linear-gradient(90deg, rgba(45, 45, 68, 0.5), rgba(61, 61, 84, 0.5));
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            position: relative;
        }

        .api-item-selectable:hover {
            background: linear-gradient(90deg, rgba(0, 212, 255, 0.1), rgba(128, 0, 255, 0.1));
            border-left-color: #00d4ff;
            transform: translateX(5px);
        }

        .api-item-selectable.selected {
            background: linear-gradient(90deg, rgba(40, 167, 69, 0.2), rgba(32, 201, 151, 0.2));
            border-left-color: #28a745;
        }

        .api-checkbox {
            margin-right: 15px;
            width: 18px;
            height: 18px;
            border: 2px solid #00d4ff;
            border-radius: 4px;
            background: transparent;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }

        .api-checkbox.checked {
            background: #00d4ff;
            border-color: #00d4ff;
        }

        .api-checkbox.checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #000;
            font-weight: bold;
            font-size: 12px;
        }

        .selected-api-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: linear-gradient(90deg, rgba(40, 167, 69, 0.3), rgba(32, 201, 151, 0.3));
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #28a745;
            position: relative;
        }

        .drag-handle {
            margin-right: 10px;
            color: #28a745;
            cursor: grab;
            font-size: 16px;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        .remove-btn {
            margin-left: auto;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .remove-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #b0b0b0;
            font-style: italic;
        }

        .order-controls {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-left: 10px;
        }

        .order-btn {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 2px 6px;
            cursor: pointer;
            font-size: 10px;
            transition: all 0.3s ease;
        }

        .order-btn:hover {
            background: #5a6268;
        }

        /* Âú∫ÊôØÁÆ°ÁêÜÊ†∑Âºè */
        .scenario-management {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #8000ff;
        }

        .scenario-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .scenario-card {
            background: linear-gradient(135deg, rgba(128, 0, 255, 0.1), rgba(0, 212, 255, 0.1));
            border: 1px solid #8000ff;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .scenario-card:hover {
            border-color: #00d4ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(128, 0, 255, 0.3);
        }

        .scenario-card.active {
            border-color: #00d4ff;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(128, 0, 255, 0.2));
        }

        .scenario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .scenario-name {
            font-weight: bold;
            color: #00d4ff;
            font-size: 16px;
        }

        .scenario-actions {
            display: flex;
            gap: 5px;
        }

        .scenario-btn {
            background: transparent;
            border: 1px solid #6c757d;
            color: #6c757d;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .scenario-btn:hover {
            background: #6c757d;
            color: white;
        }

        .scenario-btn.edit:hover {
            background: #ffc107;
            border-color: #ffc107;
            color: #000;
        }

        .scenario-btn.delete:hover {
            background: #dc3545;
            border-color: #dc3545;
            color: white;
        }

        .scenario-btn.run:hover {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }

        .scenario-info {
            font-size: 12px;
            color: #b0b0b0;
            margin-bottom: 10px;
        }

        .scenario-apis {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .scenario-api-tag {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid #00d4ff;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 10px;
            color: #00d4ff;
        }

        /* Âú∫ÊôØÂàõÂª∫Âô® */
        .scenario-creator {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #00d4ff;
        }

        .scenario-form {
            display: grid;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            color: #00d4ff;
            font-weight: bold;
            font-size: 14px;
        }

        .form-input {
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00d4ff;
            border-radius: 6px;
            color: #e0e6ed;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }

        /* ÂèÇÊï∞ÈÖçÁΩÆ */
        .param-config {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            border: 1px solid #444;
        }

        .param-config-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .param-config-title {
            color: #00d4ff;
            font-weight: bold;
        }

        .param-mapping {
            display: grid;
            gap: 10px;
        }

        .param-row {
            display: grid;
            grid-template-columns: 1fr auto 1fr auto;
            gap: 10px;
            align-items: center;
            padding: 10px;
            background: rgba(45, 45, 68, 0.5);
            border-radius: 6px;
        }

        .param-select {
            padding: 6px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #6c757d;
            border-radius: 4px;
            color: #e0e6ed;
            font-size: 12px;
        }

        .param-arrow {
            color: #00d4ff;
            font-weight: bold;
            text-align: center;
        }

        .remove-param-btn {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 10px;
        }

        .add-param-btn {
            background: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 10px;
        }

        /* Âú∫ÊôØÊ≠•È™§ */
        .scenario-steps {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .scenario-step {
            display: flex;
            align-items: center;
            padding: 12px;
            background: linear-gradient(90deg, rgba(45, 45, 68, 0.5), rgba(61, 61, 84, 0.5));
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid #00d4ff;
        }

        .step-number {
            background: #00d4ff;
            color: #000;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            margin-right: 15px;
        }

        .step-content {
            flex: 1;
        }

        .step-api {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .step-params {
            font-size: 12px;
            color: #b0b0b0;
        }

        .step-actions {
            display: flex;
            gap: 5px;
        }

        .step-btn {
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 10px;
        }

        .step-btn:hover {
            background: #5a6268;
        }

        /* ÂØºÂÖ•Êé•Âè£ÊñáÊ°£Ê†∑Âºè */
        .import-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .import-modal-content {
            background: linear-gradient(135deg, #1e1e2e, #2d2d44);
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            border: 2px solid #00d4ff;
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
        }

        .import-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #444;
        }

        .import-modal-title {
            font-size: 24px;
            color: #00d4ff;
            font-weight: bold;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: #b0b0b0;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #dc3545;
            color: white;
        }

        .import-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid #444;
        }

        .import-tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            color: #b0b0b0;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .import-tab.active {
            color: #00d4ff;
            border-bottom-color: #00d4ff;
        }

        .import-tab:hover {
            color: #00d4ff;
        }

        .import-content {
            display: none;
        }

        .import-content.active {
            display: block;
        }

        .file-upload-area {
            border: 2px dashed #00d4ff;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-upload-area:hover {
            background: rgba(0, 212, 255, 0.1);
            border-color: #8000ff;
        }

        .file-upload-area.dragover {
            background: rgba(0, 212, 255, 0.2);
            border-color: #8000ff;
        }

        .upload-icon {
            font-size: 48px;
            color: #00d4ff;
            margin-bottom: 15px;
        }

        .upload-text {
            color: #e0e6ed;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .upload-hint {
            color: #b0b0b0;
            font-size: 12px;
        }

        .file-input {
            display: none;
        }

        .url-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .url-input {
            flex: 1;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00d4ff;
            border-radius: 6px;
            color: #e0e6ed;
            font-size: 14px;
        }

        .url-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .import-btn {
            padding: 12px 24px;
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .import-btn:hover {
            background: linear-gradient(45deg, #0099cc, #00d4ff);
            transform: translateY(-2px);
        }

        .import-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .json-editor {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #444;
            border-radius: 8px;
            color: #e0e6ed;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            resize: vertical;
        }

        .json-editor:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        .import-preview {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid #444;
        }

        .preview-header {
            color: #00d4ff;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-stats {
            font-size: 12px;
            color: #b0b0b0;
        }

        .preview-apis {
            max-height: 200px;
            overflow-y: auto;
        }

        .preview-api-item {
            display: flex;
            align-items: center;
            padding: 8px;
            background: rgba(45, 45, 68, 0.5);
            border-radius: 4px;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .preview-method {
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
            margin-right: 10px;
            min-width: 45px;
            text-align: center;
        }

        .import-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #444;
        }

        /* ÂàÜÁ±ªÁÆ°ÁêÜÊ†∑Âºè */
        .category-manager {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #00d4ff;
        }

        .category-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .category-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(128, 0, 255, 0.1));
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .category-card:hover {
            border-color: #00d4ff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .category-name {
            font-weight: bold;
            color: #00d4ff;
            font-size: 16px;
        }

        .category-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #fff;
        }

        .category-description {
            font-size: 12px;
            color: #b0b0b0;
            margin-bottom: 10px;
        }

        .category-stats {
            font-size: 12px;
            color: #00d4ff;
        }

        .category-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .category-btn {
            background: transparent;
            border: 1px solid #6c757d;
            color: #6c757d;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            background: #6c757d;
            color: white;
        }

        .category-btn.edit:hover {
            background: #ffc107;
            border-color: #ffc107;
            color: #000;
        }

        .category-btn.delete:hover {
            background: #dc3545;
            border-color: #dc3545;
            color: white;
        }

        /* ÂàÜÁ±ªÁºñËæëÂô® */
        .category-editor {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #00d4ff;
        }

        .color-picker {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .color-option.selected {
            border-color: #fff;
            transform: scale(1.2);
        }

        /* ÂàÜÁ±ªÂåñÁöÑÊé•Âè£ÂàóË°® */
        .categorized-api-list {
            margin-bottom: 20px;
        }

        .category-section {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
            border-left: 4px solid var(--category-color, #00d4ff);
        }

        .category-section-header {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-section-header:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        .category-section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            color: var(--category-color, #00d4ff);
        }

        .category-section-toggle {
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .category-section.collapsed .category-section-toggle {
            transform: rotate(-90deg);
        }

        .category-section-content {
            padding: 0 20px 15px;
            transition: all 0.3s ease;
        }

        .category-section.collapsed .category-section-content {
            display: none;
        }

        .uncategorized-section {
            border-left-color: #6c757d;
        }

        .uncategorized-section .category-section-title {
            color: #6c757d;
        }

        /* Êé•Âè£ÁßªÂä®ÂäüËÉΩ */
        .api-item-with-move {
            position: relative;
        }

        .api-move-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .api-item:hover .api-move-btn {
            opacity: 1;
        }

        .api-move-btn:hover {
            background: #00d4ff;
        }

        .move-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .move-modal-content {
            background: linear-gradient(135deg, #1e1e2e, #2d2d44);
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border: 2px solid #00d4ff;
            box-shadow: 0 20px 40px rgba(0, 212, 255, 0.3);
        }

        .move-category-list {
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .move-category-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(45, 45, 68, 0.5);
            border-radius: 6px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .move-category-item:hover {
            background: rgba(0, 212, 255, 0.2);
            border-left-color: #00d4ff;
        }

        .move-category-item.selected {
            background: rgba(0, 212, 255, 0.3);
            border-left-color: #00d4ff;
        }

        /* AIÊô∫ËÉΩÂØºÂÖ•Ê†∑Âºè */
        .ai-import-section {
            padding: 20px 0;
        }

        .ai-model-select {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00d4ff;
            border-radius: 6px;
            color: #e0e6ed;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .ai-model-select:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .ai-api-key {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00d4ff;
            border-radius: 6px;
            color: #e0e6ed;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .ai-api-key:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .ai-input-methods {
            margin: 20px 0;
        }

        .ai-method-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            border-bottom: 1px solid #444;
        }

        .ai-method-tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: #b0b0b0;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .ai-method-tab.active {
            color: #00d4ff;
            border-bottom-color: #00d4ff;
        }

        .ai-method-tab:hover {
            color: #00d4ff;
        }

        .ai-method-content {
            display: none;
        }

        .ai-method-content.active {
            display: block;
        }

        .ai-description-input {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #444;
            border-radius: 8px;
            color: #e0e6ed;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            line-height: 1.5;
        }

        .ai-description-input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        .ai-options {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid #444;
        }

        .ai-options .form-group {
            margin-bottom: 10px;
        }

        .ai-options label {
            display: flex;
            align-items: center;
            color: #e0e6ed;
            font-size: 14px;
            cursor: pointer;
        }

        .ai-options input[type="checkbox"] {
            margin-right: 10px;
            accent-color: #00d4ff;
        }

        .ai-generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #8000ff, #00d4ff);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .ai-generate-btn:hover {
            background: linear-gradient(45deg, #00d4ff, #8000ff);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(128, 0, 255, 0.3);
        }

        .ai-generate-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .ai-loading {
            display: none;
        }

        .ai-generate-btn.loading .ai-btn-text {
            display: none;
        }

        .ai-generate-btn.loading .ai-loading {
            display: inline;
        }

        .ai-progress {
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border-left: 4px solid #00d4ff;
            display: none;
        }

        .ai-progress.show {
            display: block;
        }

        .ai-progress-text {
            color: #00d4ff;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .ai-progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 3px;
            overflow: hidden;
        }

        .ai-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #8000ff);
            border-radius: 3px;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
            }
            
            .test-types {
                flex-direction: column;
            }
            
            .config-section {
                flex-wrap: wrap;
            }

            .api-selection-container {
                grid-template-columns: 1fr;
            }

            .category-list {
                grid-template-columns: 1fr;
            }
        }

        /* ÊªöÂä®Êù°Ê†∑Âºè */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #00d4ff, #8000ff);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #8000ff, #00d4ff);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    
    <!-- ÁßªÂä®Êé•Âè£Ê®°ÊÄÅÊ°Ü -->
    <div class="move-modal" id="moveModal" style="display: none;">
        <div class="move-modal-content">
            <div class="import-modal-header">
                <h2 class="import-modal-title">üìÅ ÁßªÂä®Êé•Âè£Âà∞ÂàÜÁ±ª</h2>
                <button class="close-btn" onclick="hideMoveModal()">√ó</button>
            </div>
            
            <div style="margin-bottom: 20px;">
                <p style="color: #b0b0b0;">ÈÄâÊã©Ë¶ÅÁßªÂä®Âà∞ÁöÑÂàÜÁ±ªÔºö</p>
                <div style="background: rgba(0, 0, 0, 0.3); padding: 10px; border-radius: 6px; margin-top: 10px;">
                    <span style="color: #00d4ff; font-weight: bold;" id="moveApiName">Êé•Âè£ÂêçÁß∞</span>
                </div>
            </div>
            
            <div class="move-category-list" id="moveCategoryList">
                <!-- ÂàÜÁ±ªÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
            </div>
            
            <div class="import-actions">
                <button class="btn btn-warning" onclick="hideMoveModal()">ÂèñÊ∂à</button>
                <button class="btn btn-success" id="confirmMoveBtn" onclick="confirmMoveApi()" disabled>Á°ÆËÆ§ÁßªÂä®</button>
            </div>
        </div>
    </div>
    
    <!-- ÂØºÂÖ•Êé•Âè£ÊñáÊ°£Ê®°ÊÄÅÊ°Ü -->
    <div class="import-modal" id="importModal" style="display: none;">
        <div class="import-modal-content">
            <div class="import-modal-header">
                <h2 class="import-modal-title">üì• ÂØºÂÖ•Êé•Âè£ÊñáÊ°£</h2>
                <button class="close-btn" onclick="hideImportModal()">√ó</button>
            </div>
            
            <div class="import-tabs">
                <button class="import-tab active" onclick="switchImportTab('swagger')">Swagger/OpenAPI</button>
                <button class="import-tab" onclick="switchImportTab('postman')">Postman Collection</button>
                <button class="import-tab" onclick="switchImportTab('json')">Ëá™ÂÆö‰πâJSON</button>
                <button class="import-tab" onclick="switchImportTab('url')">Âú®Á∫øÊñáÊ°£</button>
                <button class="import-tab" onclick="switchImportTab('ai')">ü§ñ AIÊô∫ËÉΩÂØºÂÖ•</button>
            </div>
            
            <!-- Swagger/OpenAPI ÂØºÂÖ• -->
            <div class="import-content active" id="swagger-content">
                <div class="file-upload-area" onclick="document.getElementById('swaggerFile').click()" 
                     ondrop="handleFileDrop(event, 'swagger')" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                    <div class="upload-icon">üìÑ</div>
                    <div class="upload-text">ÁÇπÂáªÈÄâÊã©ÊàñÊãñÊãΩ Swagger/OpenAPI Êñá‰ª∂</div>
                    <div class="upload-hint">ÊîØÊåÅ .json, .yaml, .yml Ê†ºÂºè</div>
                </div>
                <input type="file" id="swaggerFile" class="file-input" accept=".json,.yaml,.yml" onchange="handleFileSelect(event, 'swagger')">
            </div>
            
            <!-- Postman Collection ÂØºÂÖ• -->
            <div class="import-content" id="postman-content">
                <div class="file-upload-area" onclick="document.getElementById('postmanFile').click()" 
                     ondrop="handleFileDrop(event, 'postman')" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                    <div class="upload-icon">üìÆ</div>
                    <div class="upload-text">ÁÇπÂáªÈÄâÊã©ÊàñÊãñÊãΩ Postman Collection Êñá‰ª∂</div>
                    <div class="upload-hint">ÊîØÊåÅ .json Ê†ºÂºèÁöÑ Postman Collection v2.1</div>
                </div>
                <input type="file" id="postmanFile" class="file-input" accept=".json" onchange="handleFileSelect(event, 'postman')">
            </div>
            
            <!-- Ëá™ÂÆö‰πâJSON ÂØºÂÖ• -->
            <div class="import-content" id="json-content">
                <div class="form-group">
                    <label>Á≤òË¥¥ÊàñÁºñËæë JSON Ê†ºÂºèÁöÑÊé•Âè£ÂÆö‰πâ</label>
                    <textarea class="json-editor" id="jsonEditor" placeholder='ËØ∑ËæìÂÖ•JSONÊ†ºÂºèÁöÑÊé•Âè£ÂÆö‰πâÔºå‰æãÂ¶ÇÔºö
{
  "apis": [
    {
      "method": "GET",
      "name": "Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ",
      "url": "/api/user/{id}",
      "description": "Ê†πÊçÆÁî®Êà∑IDËé∑ÂèñÁî®Êà∑ËØ¶ÁªÜ‰ø°ÊÅØ"
    },
    {
      "method": "POST", 
      "name": "ÂàõÂª∫Áî®Êà∑",
      "url": "/api/user",
      "description": "ÂàõÂª∫Êñ∞Áî®Êà∑"
    }
  ]
}'></textarea>
                </div>
                <button class="import-btn" onclick="parseJsonContent()">Ëß£ÊûêJSON</button>
            </div>
            
            <!-- Âú®Á∫øÊñáÊ°£ ÂØºÂÖ• -->
            <div class="import-content" id="url-content">
                <div class="form-group">
                    <label>Âú®Á∫øÊñáÊ°£URL</label>
                    <div class="url-input-group">
                        <input type="url" class="url-input" id="docUrl" placeholder="ËØ∑ËæìÂÖ• Swagger/OpenAPI ÊñáÊ°£ÁöÑÂú®Á∫øÂú∞ÂùÄ">
                        <button class="import-btn" onclick="fetchOnlineDoc()">Ëé∑ÂèñÊñáÊ°£</button>
                    </div>
                </div>
                <div class="upload-hint">
                    Á§∫‰æãÔºöhttps://petstore.swagger.io/v2/swagger.json
                </div>
            </div>
            
            <!-- AIÊô∫ËÉΩÂØºÂÖ• -->
            <div class="import-content" id="ai-content">
                <div class="ai-import-section">
                    <div class="form-group">
                        <label>ÈÄâÊã©Â§ßÊ®°Âûã</label>
                        <select class="ai-model-select" id="aiModelSelect">
                            <option value="gpt-4">GPT-4 (OpenAI)</option>
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo (OpenAI)</option>
                            <option value="claude-3-sonnet">Claude 3 Sonnet (Anthropic)</option>
                            <option value="claude-3-haiku">Claude 3 Haiku (Anthropic)</option>
                            <option value="gemini-pro">Gemini Pro (Google)</option>
                            <option value="qwen-max">ÈÄö‰πâÂçÉÈóÆ Max (ÈòøÈáå‰∫ë)</option>
                            <option value="ernie-bot">ÊñáÂøÉ‰∏ÄË®Ä (ÁôæÂ∫¶)</option>
                            <option value="chatglm">ChatGLM (Êô∫Ë∞±AI)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>APIÂØÜÈí•</label>
                        <input type="password" class="ai-api-key" id="aiApiKey" placeholder="ËØ∑ËæìÂÖ•ÂØπÂ∫îÊ®°ÂûãÁöÑAPIÂØÜÈí•">
                        <div class="upload-hint">ÂØÜÈí•Â∞Ü‰ªÖÂú®Êú¨Ê¨°‰ºöËØù‰∏≠‰ΩøÁî®Ôºå‰∏ç‰ºöË¢´‰øùÂ≠ò</div>
                    </div>
                    
                    <div class="ai-input-methods">
                        <div class="ai-method-tabs">
                            <button class="ai-method-tab active" onclick="switchAiMethod('text')">üìù ÊñáÊú¨ÊèèËø∞</button>
                            <button class="ai-method-tab" onclick="switchAiMethod('file')">üìÑ ÊñáÊ°£‰∏ä‰º†</button>
                            <button class="ai-method-tab" onclick="switchAiMethod('url')">üîó Âú®Á∫øÊñáÊ°£</button>
                        </div>
                        
                        <!-- ÊñáÊú¨ÊèèËø∞ÊñπÂºè -->
                        <div class="ai-method-content active" id="ai-text-method">
                            <div class="form-group">
                                <label>ÊèèËø∞ÊÇ®ÁöÑAPIÈúÄÊ±Ç</label>
                                <textarea class="ai-description-input" id="aiDescription" placeholder="ËØ∑ËØ¶ÁªÜÊèèËø∞ÊÇ®ÈúÄË¶ÅÁöÑAPIÊé•Âè£Ôºå‰æãÂ¶ÇÔºö
ÊàëÈúÄË¶Å‰∏Ä‰∏™Áî®Êà∑ÁÆ°ÁêÜÁ≥ªÁªüÁöÑAPIÔºåÂåÖÊã¨Ôºö
1. Áî®Êà∑Ê≥®ÂÜåÊé•Âè£ - POST /api/user/register
2. Áî®Êà∑ÁôªÂΩïÊé•Âè£ - POST /api/user/login  
3. Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ - GET /api/user/{id}
4. Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ - PUT /api/user/{id}
5. Âà†Èô§Áî®Êà∑ - DELETE /api/user/{id}
6. Ëé∑ÂèñÁî®Êà∑ÂàóË°® - GET /api/users

ÊØè‰∏™Êé•Âè£ÈúÄË¶ÅÂåÖÂê´ÈÄÇÂΩìÁöÑËØ∑Ê±ÇÂèÇÊï∞„ÄÅÂìçÂ∫îÊ†ºÂºèÂíåÈîôËØØÂ§ÑÁêÜ„ÄÇ"></textarea>
                            </div>
                        </div>
                        
                        <!-- ÊñáÊ°£‰∏ä‰º†ÊñπÂºè -->
                        <div class="ai-method-content" id="ai-file-method">
                            <div class="file-upload-area" onclick="document.getElementById('aiDocFile').click()" 
                                 ondrop="handleAiFileDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                                <div class="upload-icon">ü§ñ</div>
                                <div class="upload-text">‰∏ä‰º†APIÊñáÊ°£ËÆ©AIÂàÜÊûê</div>
                                <div class="upload-hint">ÊîØÊåÅ PDF, Word, TXT, MD Á≠âÊ†ºÂºè</div>
                            </div>
                            <input type="file" id="aiDocFile" class="file-input" accept=".pdf,.doc,.docx,.txt,.md" onchange="handleAiFileSelect(event)">
                        </div>
                        
                        <!-- Âú®Á∫øÊñáÊ°£ÊñπÂºè -->
                        <div class="ai-method-content" id="ai-url-method">
                            <div class="form-group">
                                <label>Âú®Á∫øÊñáÊ°£URL</label>
                                <input type="url" class="url-input" id="aiDocUrl" placeholder="ËØ∑ËæìÂÖ•APIÊñáÊ°£ÁöÑÂú®Á∫øÂú∞ÂùÄ">
                                <div class="upload-hint">AIÂ∞ÜËá™Âä®ÊäìÂèñÂπ∂ÂàÜÊûêÊñáÊ°£ÂÜÖÂÆπ</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ai-options">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="aiIncludeExamples" checked>
                                ÁîüÊàêÁ§∫‰æãÊï∞ÊçÆ
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="aiIncludeValidation" checked>
                                ÂåÖÂê´ÂèÇÊï∞È™åËØÅ
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="aiIncludeErrorHandling" checked>
                                ÁîüÊàêÈîôËØØÂ§ÑÁêÜ
                            </label>
                        </div>
                    </div>
                    
                    <button class="import-btn ai-generate-btn" onclick="generateApisWithAI()">
                        <span class="ai-btn-text">üöÄ AIÁîüÊàêÊé•Âè£</span>
                        <span class="ai-loading" style="display: none;">ü§ñ AIÊ≠£Âú®ÂàÜÊûê‰∏≠...</span>
                    </button>
                    
                    <!-- AIÂ§ÑÁêÜËøõÂ∫¶ -->
                    <div class="ai-progress" id="aiProgress">
                        <div class="ai-progress-text" id="aiProgressText">Ê≠£Âú®ÂàùÂßãÂåñAIÊ®°Âûã...</div>
                        <div class="ai-progress-bar">
                            <div class="ai-progress-fill" id="aiProgressFill"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- È¢ÑËßàÂå∫Âüü -->
            <div class="import-preview" id="importPreview" style="display: none;">
                <div class="preview-header">
                    <span>ÂØºÂÖ•È¢ÑËßà</span>
                    <span class="preview-stats" id="previewStats">0 ‰∏™Êé•Âè£</span>
                </div>
                <div class="preview-apis" id="previewApis"></div>
            </div>
            
            <div class="import-actions">
                <button class="btn btn-warning" onclick="hideImportModal()">ÂèñÊ∂à</button>
                <button class="btn btn-success" id="confirmImportBtn" onclick="confirmImport()" disabled>Á°ÆËÆ§ÂØºÂÖ•</button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Â∑¶‰æßËèúÂçï -->
        <div class="sidebar">
            <div class="logo">
                <h1>üöÄ APIÊµãËØïÂπ≥Âè∞</h1>
            </div>
            
            <div class="menu-section">
                <div class="menu-title">ÂäüËÉΩÊ®°Âùó</div>
                
                <div class="menu-item active" onclick="switchModule('exam')">
                    üìù ËÄÉËØïÊ®°Âùó
                </div>
                <div class="submenu">
                    <div class="menu-item" onclick="switchCategory('exam', 'list')">Êé•Âè£ÂàóË°®</div>
                    <div class="menu-item" onclick="switchCategory('exam', 'normal')">ÊôÆÈÄöÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('exam', 'sequence')">È°∫Â∫èÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('exam', 'scenario')">Âú∫ÊôØÊµãËØï</div>
                </div>
                
                <div class="menu-item" onclick="switchModule('course')">
                    üìö ËØæÁ®ãÊ®°Âùó
                </div>
                <div class="submenu">
                    <div class="menu-item" onclick="switchCategory('course', 'list')">Êé•Âè£ÂàóË°®</div>
                    <div class="menu-item" onclick="switchCategory('course', 'normal')">ÊôÆÈÄöÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('course', 'sequence')">È°∫Â∫èÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('course', 'scenario')">Âú∫ÊôØÊµãËØï</div>
                </div>
                
                <div class="menu-item" onclick="switchModule('learning')">
                    üó∫Ô∏è Â≠¶‰π†Âú∞Âõæ
                </div>
                <div class="submenu">
                    <div class="menu-item" onclick="switchCategory('learning', 'list')">Êé•Âè£ÂàóË°®</div>
                    <div class="menu-item" onclick="switchCategory('learning', 'normal')">ÊôÆÈÄöÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('learning', 'sequence')">È°∫Â∫èÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('learning', 'scenario')">Âú∫ÊôØÊµãËØï</div>
                </div>
                
                <div class="menu-item" onclick="switchModule('training')">
                    üéì ÂüπËÆ≠Áè≠
                </div>
                <div class="submenu">
                    <div class="menu-item" onclick="switchCategory('training', 'list')">Êé•Âè£ÂàóË°®</div>
                    <div class="menu-item" onclick="switchCategory('training', 'normal')">ÊôÆÈÄöÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('training', 'sequence')">È°∫Â∫èÊµãËØï</div>
                    <div class="menu-item" onclick="switchCategory('training', 'scenario')">Âú∫ÊôØÊµãËØï</div>
                </div>
            </div>
            
            <div class="menu-section">
                <div class="menu-title">Á≥ªÁªüËÆæÁΩÆ</div>
                <div class="menu-item" onclick="showSettings()">
                    ‚öôÔ∏è ÂÖ®Â±ÄÈÖçÁΩÆ
                </div>
                <div class="menu-item" onclick="showVariables()">
                    üìã ÂèòÈáèÁÆ°ÁêÜ
                </div>
            </div>
        </div>
        
        <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
        <div class="main-content">
            <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†è -->
            <div class="toolbar">
                <div class="config-section">
                    <div class="config-item">
                        <label>ÁéØÂ¢É:</label>
                        <select class="config-input" id="environment">
                            <option value="dev">ÂºÄÂèëÁéØÂ¢É</option>
                            <option value="test">ÊµãËØïÁéØÂ¢É</option>
                            <option value="prod">Áîü‰∫ßÁéØÂ¢É</option>
                        </select>
                    </div>
                    <div class="config-item">
                        <label>Host:</label>
                        <input type="text" class="config-input" id="host" value="https://api.example.com" placeholder="ËØ∑ËæìÂÖ•APIÂú∞ÂùÄ">
                    </div>
                    <div class="config-item">
                        <label>Token:</label>
                        <input type="text" class="config-input" id="token" placeholder="ËØ∑ËæìÂÖ•ËÆøÈóÆ‰ª§Áâå">
                    </div>
                    <button class="btn btn-primary" onclick="saveConfig()">‰øùÂ≠òÈÖçÁΩÆ</button>
                </div>
            </div>
            
            <!-- ÂÜÖÂÆπÈù¢Êùø -->
            <div class="content-panel" id="contentPanel">
                <div class="panel-header">
                    <h2 class="panel-title">ËÄÉËØïÊ®°Âùó - Êé•Âè£ÂàóË°®</h2>
                    <p class="panel-subtitle">ÁÆ°ÁêÜÂíåÊµãËØïËÄÉËØïÁõ∏ÂÖ≥ÁöÑAPIÊé•Âè£</p>
                </div>
                
                <!-- ÊµãËØïÁ±ªÂûãÈÄâÊã© -->
                <div class="test-types">
                    <div class="test-type-card active" onclick="switchTestType('normal')">
                        <div class="test-type-icon">‚ö°</div>
                        <div class="test-type-title">ÊôÆÈÄöÊµãËØï</div>
                        <div class="test-type-desc">Âçï‰∏™Êé•Âè£Âø´ÈÄüÊµãËØï</div>
                    </div>
                    <div class="test-type-card" onclick="switchTestType('sequence')">
                        <div class="test-type-icon">üîÑ</div>
                        <div class="test-type-title">È°∫Â∫èÊµãËØï</div>
                        <div class="test-type-desc">ÊåâÈ°∫Â∫èÊâßË°åÂ§ö‰∏™Êé•Âè£</div>
                    </div>
                    <div class="test-type-card" onclick="switchTestType('scenario')">
                        <div class="test-type-icon">üéØ</div>
                        <div class="test-type-title">Âú∫ÊôØÊµãËØï</div>
                        <div class="test-type-desc">Â§çÊùÇ‰∏öÂä°Âú∫ÊôØÊµãËØï</div>
                    </div>
                </div>
                
                <!-- Êé•Âè£ÂàóË°® -->
                <div class="api-list">
                    <div class="api-list-header">
                        <h3 class="api-list-title">ËÄÉËØïÊé•Âè£ÂàóË°®</h3>
                        <button class="btn btn-success" onclick="runAllTests()">ÊâπÈáèÊµãËØï</button>
                    </div>
                    
                    <div class="api-item" onclick="testApi('getExamList')">
                        <span class="api-method method-get">GET</span>
                        <div class="api-info">
                            <div class="api-name">Ëé∑ÂèñËÄÉËØïÂàóË°®</div>
                            <div class="api-url">/api/exam/list</div>
                        </div>
                        <span class="api-status status-ready">Â∞±Áª™</span>
                    </div>
                    
                    <div class="api-item" onclick="testApi('createExam')">
                        <span class="api-method method-post">POST</span>
                        <div class="api-info">
                            <div class="api-name">ÂàõÂª∫ËÄÉËØï</div>
                            <div class="api-url">/api/exam/create</div>
                        </div>
                        <span class="api-status status-ready">Â∞±Áª™</span>
                    </div>
                    
                    <div class="api-item" onclick="testApi('updateExam')">
                        <span class="api-method method-put">PUT</span>
                        <div class="api-info">
                            <div class="api-name">Êõ¥Êñ∞ËÄÉËØï‰ø°ÊÅØ</div>
                            <div class="api-url">/api/exam/update/{id}</div>
                        </div>
                        <span class="api-status status-ready">Â∞±Áª™</span>
                    </div>
                    
                    <div class="api-item" onclick="testApi('deleteExam')">
                        <span class="api-method method-delete">DELETE</span>
                        <div class="api-info">
                            <div class="api-name">Âà†Èô§ËÄÉËØï</div>
                            <div class="api-url">/api/exam/delete/{id}</div>
                        </div>
                        <span class="api-status status-ready">Â∞±Áª™</span>
                    </div>
                    
                    <div class="api-item" onclick="testApi('submitExam')">
                        <span class="api-method method-post">POST</span>
                        <div class="api-info">
                            <div class="api-name">Êèê‰∫§ËÄÉËØïÁ≠îÊ°à</div>
                            <div class="api-url">/api/exam/submit</div>
                        </div>
                        <span class="api-status status-ready">Â∞±Áª™</span>
                    </div>
                    
                    <div class="api-item" onclick="testApi('getExamResult')">
                        <span class="api-method method-get">GET</span>
                        <div class="api-info">
                            <div class="api-name">Ëé∑ÂèñËÄÉËØïÁªìÊûú</div>
                            <div class="api-url">/api/exam/result/{id}</div>
                        </div>
                        <span class="api-status status-ready">Â∞±Áª™</span>
                    </div>
                </div>
                
                <!-- ÊµãËØïÁªìÊûú -->
                <div class="test-results">
                    <div class="result-header">
                        <h3 class="result-title">ÊµãËØïÁªìÊûú</h3>
                        <div class="result-stats">
                            <div class="stat-item">
                                <div class="stat-number" id="totalTests">0</div>
                                <div class="stat-label">ÊÄªÊµãËØï</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="passedTests">0</div>
                                <div class="stat-label">ÈÄöËøá</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="failedTests">0</div>
                                <div class="stat-label">Â§±Ë¥•</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="avgTime">0ms</div>
                                <div class="stat-label">Âπ≥ÂùáËÄóÊó∂</div>
                            </div>
                        </div>
                    </div>
                    <div id="testLog">
                        <p style="color: #b0b0b0; text-align: center; padding: 20px;">
                            ÁÇπÂáªÊé•Âè£ÂºÄÂßãÊµãËØïÔºåÁªìÊûúÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫...
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ê®°ÂùóÊï∞ÊçÆ
        const moduleData = {
            exam: {
                name: 'ËÄÉËØïÊ®°Âùó',
                icon: 'üìù',
                categories: [
                    {
                        id: 'exam_basic',
                        name: 'Âü∫Á°ÄÁÆ°ÁêÜ',
                        description: 'ËÄÉËØïÁöÑÂü∫Êú¨Â¢ûÂà†ÊîπÊü•Êìç‰Ωú',
                        color: '#00d4ff'
                    },
                    {
                        id: 'exam_process',
                        name: 'ËÄÉËØïÊµÅÁ®ã',
                        description: 'ËÄÉËØïÁ≠îÈ¢òÂíåÁªìÊûúÁõ∏ÂÖ≥Êìç‰Ωú',
                        color: '#28a745'
                    }
                ],
                apis: [
                    { method: 'GET', name: 'Ëé∑ÂèñËÄÉËØïÂàóË°®', url: '/api/exam/list', categoryId: 'exam_basic' },
                    { method: 'POST', name: 'ÂàõÂª∫ËÄÉËØï', url: '/api/exam/create', categoryId: 'exam_basic' },
                    { method: 'PUT', name: 'Êõ¥Êñ∞ËÄÉËØï‰ø°ÊÅØ', url: '/api/exam/update/{id}', categoryId: 'exam_basic' },
                    { method: 'DELETE', name: 'Âà†Èô§ËÄÉËØï', url: '/api/exam/delete/{id}', categoryId: 'exam_basic' },
                    { method: 'POST', name: 'Êèê‰∫§ËÄÉËØïÁ≠îÊ°à', url: '/api/exam/submit', categoryId: 'exam_process' },
                    { method: 'GET', name: 'Ëé∑ÂèñËÄÉËØïÁªìÊûú', url: '/api/exam/result/{id}', categoryId: 'exam_process' }
                ]
            },
            course: {
                name: 'ËØæÁ®ãÊ®°Âùó',
                icon: 'üìö',
                categories: [
                    {
                        id: 'course_manage',
                        name: 'ËØæÁ®ãÁÆ°ÁêÜ',
                        description: 'ËØæÁ®ãÁöÑÂü∫Êú¨ÁÆ°ÁêÜÊìç‰Ωú',
                        color: '#8000ff'
                    },
                    {
                        id: 'course_student',
                        name: 'Â≠¶ÂëòÊìç‰Ωú',
                        description: 'Â≠¶ÂëòÁõ∏ÂÖ≥ÁöÑËØæÁ®ãÊìç‰Ωú',
                        color: '#ffc107'
                    }
                ],
                apis: [
                    { method: 'GET', name: 'Ëé∑ÂèñËØæÁ®ãÂàóË°®', url: '/api/course/list', categoryId: 'course_manage' },
                    { method: 'POST', name: 'ÂàõÂª∫ËØæÁ®ã', url: '/api/course/create', categoryId: 'course_manage' },
                    { method: 'PUT', name: 'Êõ¥Êñ∞ËØæÁ®ã‰ø°ÊÅØ', url: '/api/course/update/{id}', categoryId: 'course_manage' },
                    { method: 'DELETE', name: 'Âà†Èô§ËØæÁ®ã', url: '/api/course/delete/{id}', categoryId: 'course_manage' },
                    { method: 'POST', name: 'Êä•ÂêçËØæÁ®ã', url: '/api/course/enroll', categoryId: 'course_student' },
                    { method: 'GET', name: 'Ëé∑ÂèñËØæÁ®ãËØ¶ÊÉÖ', url: '/api/course/detail/{id}', categoryId: 'course_student' }
                ]
            },
            learning: {
                name: 'Â≠¶‰π†Âú∞Âõæ',
                icon: 'üó∫Ô∏è',
                categories: [
                    {
                        id: 'learning_path',
                        name: 'Â≠¶‰π†Ë∑ØÂæÑ',
                        description: 'Â≠¶‰π†Ë∑ØÂæÑÁõ∏ÂÖ≥Êìç‰Ωú',
                        color: '#ff0080'
                    },
                    {
                        id: 'learning_progress',
                        name: 'Â≠¶‰π†ËøõÂ∫¶',
                        description: 'Â≠¶‰π†ËøõÂ∫¶Ë∑üË∏™Êìç‰Ωú',
                        color: '#20c997'
                    }
                ],
                apis: [
                    { method: 'GET', name: 'Ëé∑ÂèñÂ≠¶‰π†Ë∑ØÂæÑ', url: '/api/learning/path', categoryId: 'learning_path' },
                    { method: 'POST', name: 'ÂàõÂª∫Â≠¶‰π†ËÆ°Âàí', url: '/api/learning/plan/create', categoryId: 'learning_path' },
                    { method: 'PUT', name: 'Êõ¥Êñ∞Â≠¶‰π†ËøõÂ∫¶', url: '/api/learning/progress/update', categoryId: 'learning_progress' },
                    { method: 'GET', name: 'Ëé∑ÂèñÂ≠¶‰π†ÁªüËÆ°', url: '/api/learning/stats', categoryId: 'learning_progress' },
                    { method: 'POST', name: 'ÂÆåÊàêÂ≠¶‰π†ËäÇÁÇπ', url: '/api/learning/node/complete', categoryId: 'learning_progress' }
                ]
            },
            training: {
                name: 'ÂüπËÆ≠Áè≠',
                icon: 'üéì',
                categories: [
                    {
                        id: 'training_manage',
                        name: 'ÂüπËÆ≠ÁÆ°ÁêÜ',
                        description: 'ÂüπËÆ≠Áè≠ÁÆ°ÁêÜÊìç‰Ωú',
                        color: '#fd7e14'
                    },
                    {
                        id: 'training_student',
                        name: 'Â≠¶ÂëòÁÆ°ÁêÜ',
                        description: 'ÂüπËÆ≠Áè≠Â≠¶ÂëòÁõ∏ÂÖ≥Êìç‰Ωú',
                        color: '#6f42c1'
                    }
                ],
                apis: [
                    { method: 'GET', name: 'Ëé∑ÂèñÂüπËÆ≠Áè≠ÂàóË°®', url: '/api/training/list', categoryId: 'training_manage' },
                    { method: 'POST', name: 'ÂàõÂª∫ÂüπËÆ≠Áè≠', url: '/api/training/create', categoryId: 'training_manage' },
                    { method: 'PUT', name: 'Êõ¥Êñ∞ÂüπËÆ≠Áè≠‰ø°ÊÅØ', url: '/api/training/update/{id}', categoryId: 'training_manage' },
                    { method: 'DELETE', name: 'Âà†Èô§ÂüπËÆ≠Áè≠', url: '/api/training/delete/{id}', categoryId: 'training_manage' },
                    { method: 'POST', name: 'Êä•ÂêçÂüπËÆ≠Áè≠', url: '/api/training/enroll', categoryId: 'training_student' },
                    { method: 'GET', name: 'Ëé∑ÂèñÂüπËÆ≠ËøõÂ∫¶', url: '/api/training/progress/{id}', categoryId: 'training_student' }
                ]
            }
        };

        // ÂÖ®Â±ÄÂèòÈáè
        let currentModule = 'exam';
        let currentCategory = 'list';
        let currentTestType = 'normal';
        let selectedApis = []; // Â∑≤ÈÄâÊã©ÁöÑÊé•Âè£ÂàóË°®
        let scenarios = []; // Âú∫ÊôØÂàóË°®
        let currentScenario = null; // ÂΩìÂâçÁºñËæëÁöÑÂú∫ÊôØ
        let isCreatingScenario = false; // ÊòØÂê¶Ê≠£Âú®ÂàõÂª∫Âú∫ÊôØ
        let importedApis = []; // ÂæÖÂØºÂÖ•ÁöÑÊé•Âè£ÂàóË°®
        let currentImportType = 'swagger'; // ÂΩìÂâçÂØºÂÖ•Á±ªÂûã
        let showCategoryManager = false; // ÊòØÂê¶ÊòæÁ§∫ÂàÜÁ±ªÁÆ°ÁêÜÂô®
        let editingCategory = null; // ÂΩìÂâçÁºñËæëÁöÑÂàÜÁ±ª
        let selectedApiForMove = null; // ÈÄâ‰∏≠Ë¶ÅÁßªÂä®ÁöÑÊé•Âè£
        let testStats = {
            total: 0,
            passed: 0,
            failed: 0,
            totalTime: 0
        };

        // ÂàáÊç¢Ê®°Âùó
        function switchModule(module) {
            currentModule = module;
            currentCategory = 'list';
            selectedApis = []; // Ê∏ÖÁ©∫ÈÄâÊã©
            updateActiveMenu();
            renderContent();
        }

        // ÂàáÊç¢ÂàÜÁ±ª
        function switchCategory(module, category) {
            currentModule = module;
            currentCategory = category;
            selectedApis = []; // Ê∏ÖÁ©∫ÈÄâÊã©
            updateActiveMenu();
            renderContent();
        }

        // ÂàáÊç¢ÊµãËØïÁ±ªÂûã
        function switchTestType(type) {
            currentTestType = type;
            document.querySelectorAll('.test-type-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.test-type-card').classList.add('active');
        }

        // Êõ¥Êñ∞ËèúÂçïÊøÄÊ¥ªÁä∂ÊÄÅ
        function updateActiveMenu() {
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†Êõ¥Â§çÊùÇÁöÑËèúÂçïÊøÄÊ¥ªÈÄªËæë
        }

        // Ê∏≤ÊüìÂÜÖÂÆπ
        function renderContent() {
            const module = moduleData[currentModule];
            const contentPanel = document.getElementById('contentPanel');
            
            let categoryTitle = '';
            switch(currentCategory) {
                case 'list': categoryTitle = 'Êé•Âè£ÂàóË°®'; break;
                case 'normal': categoryTitle = 'ÊôÆÈÄöÊµãËØï'; break;
                case 'sequence': categoryTitle = 'È°∫Â∫èÊµãËØï'; break;
                case 'scenario': categoryTitle = 'Âú∫ÊôØÊµãËØï'; break;
            }
            
            // Ê†πÊçÆÊµãËØïÁ±ªÂûãÊ∏≤Êüì‰∏çÂêåÁöÑÂÜÖÂÆπ
            if (currentCategory === 'list') {
                // Êé•Âè£ÂàóË°®ËßÜÂõæ - ÊåâÂàÜÁ±ªÂ±ïÁ§∫
                const categorizedApiListHtml = renderCategorizedApiList(module);
                
                contentPanel.innerHTML = `
                    <div class="panel-header">
                        <h2 class="panel-title">${module.icon} ${module.name} - ${categoryTitle}</h2>
                        <p class="panel-subtitle">ÁÆ°ÁêÜÂíåÊµãËØï${module.name}Áõ∏ÂÖ≥ÁöÑAPIÊé•Âè£</p>
                    </div>
                    
                    <div class="test-types">
                        <div class="test-type-card ${currentTestType === 'normal' ? 'active' : ''}" onclick="switchTestType('normal')">
                            <div class="test-type-icon">‚ö°</div>
                            <div class="test-type-title">ÊôÆÈÄöÊµãËØï</div>
                            <div class="test-type-desc">Âçï‰∏™Êé•Âè£Âø´ÈÄüÊµãËØï</div>
                        </div>
                        <div class="test-type-card ${currentTestType === 'sequence' ? 'active' : ''}" onclick="switchTestType('sequence')">
                            <div class="test-type-icon">üîÑ</div>
                            <div class="test-type-title">È°∫Â∫èÊµãËØï</div>
                            <div class="test-type-desc">ÊåâÈ°∫Â∫èÊâßË°åÂ§ö‰∏™Êé•Âè£</div>
                        </div>
                        <div class="test-type-card ${currentTestType === 'scenario' ? 'active' : ''}" onclick="switchTestType('scenario')">
                            <div class="test-type-icon">üéØ</div>
                            <div class="test-type-title">Âú∫ÊôØÊµãËØï</div>
                            <div class="test-type-desc">Â§çÊùÇ‰∏öÂä°Âú∫ÊôØÊµãËØï</div>
                        </div>
                    </div>
                    
                    <!-- ÂàÜÁ±ªÁÆ°ÁêÜ -->
                    <div class="category-manager" style="display: ${showCategoryManager ? 'block' : 'none'}">
                        <div class="api-list-header">
                            <h3 class="api-list-title">üìÇ ÂàÜÁ±ªÁÆ°ÁêÜ</h3>
                            <div>
                                <button class="btn btn-warning" onclick="hideCategoryManagerPanel()">ÂÖ≥Èó≠</button>
                                <button class="btn btn-primary" onclick="createNewCategory()">Êñ∞Âª∫ÂàÜÁ±ª</button>
                            </div>
                        </div>
                        
                        ${editingCategory !== null ? renderCategoryEditor() : ''}
                        
                        <div class="category-list" id="categoryList">
                            ${renderCategoryList(module)}
                        </div>
                    </div>
                    
                    <!-- ÂàÜÁ±ªÂåñÁöÑÊé•Âè£ÂàóË°® -->
                    <div class="categorized-api-list">
                        <div class="api-list-header">
                            <h3 class="api-list-title">${module.name}Êé•Âè£ÂàóË°®</h3>
                            <div>
                                <button class="btn btn-primary" onclick="showCategoryManagerPanel()">üìÇ ÁÆ°ÁêÜÂàÜÁ±ª</button>
                                <button class="btn btn-primary" onclick="showImportModal()">üì• ÂØºÂÖ•Êé•Âè£</button>
                                <button class="btn btn-success" onclick="runAllTests()">ÊâπÈáèÊµãËØï</button>
                            </div>
                        </div>
                        ${categorizedApiListHtml}
                    </div>
                    
                    <div class="test-results">
                        <div class="result-header">
                            <h3 class="result-title">ÊµãËØïÁªìÊûú</h3>
                            <div class="result-stats">
                                <div class="stat-item">
                                    <div class="stat-number" id="totalTests">${testStats.total}</div>
                                    <div class="stat-label">ÊÄªÊµãËØï</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="passedTests">${testStats.passed}</div>
                                    <div class="stat-label">ÈÄöËøá</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="failedTests">${testStats.failed}</div>
                                    <div class="stat-label">Â§±Ë¥•</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="avgTime">${testStats.total > 0 ? Math.round(testStats.totalTime / testStats.total) : 0}ms</div>
                                    <div class="stat-label">Âπ≥ÂùáËÄóÊó∂</div>
                                </div>
                            </div>
                        </div>
                        <div id="testLog">
                            <p style="color: #b0b0b0; text-align: center; padding: 20px;">
                                ÁÇπÂáªÊé•Âè£ÂºÄÂßãÊµãËØïÔºåÁªìÊûúÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫...
                            </p>
                        </div>
                    </div>
                `;
            } else if (currentCategory === 'scenario') {
                // Âú∫ÊôØÊµãËØïËßÜÂõæ - ‰∏ìÈó®ÁöÑÂú∫ÊôØÁÆ°ÁêÜÁïåÈù¢
                contentPanel.innerHTML = `
                    <div class="panel-header">
                        <h2 class="panel-title">${module.icon} ${module.name} - ${categoryTitle}</h2>
                        <p class="panel-subtitle">ÂàõÂª∫ÂíåÁÆ°ÁêÜÂ§çÊùÇÁöÑ‰∏öÂä°Âú∫ÊôØÊµãËØï</p>
                    </div>
                    
                    <div class="test-types">
                        <div class="test-type-card" onclick="switchTestType('normal')">
                            <div class="test-type-icon">‚ö°</div>
                            <div class="test-type-title">ÊôÆÈÄöÊµãËØï</div>
                            <div class="test-type-desc">Âçï‰∏™Êé•Âè£Âø´ÈÄüÊµãËØï</div>
                        </div>
                        <div class="test-type-card" onclick="switchTestType('sequence')">
                            <div class="test-type-icon">üîÑ</div>
                            <div class="test-type-title">È°∫Â∫èÊµãËØï</div>
                            <div class="test-type-desc">ÊåâÈ°∫Â∫èÊâßË°åÂ§ö‰∏™Êé•Âè£</div>
                        </div>
                        <div class="test-type-card active" onclick="switchTestType('scenario')">
                            <div class="test-type-icon">üéØ</div>
                            <div class="test-type-title">Âú∫ÊôØÊµãËØï</div>
                            <div class="test-type-desc">Â§çÊùÇ‰∏öÂä°Âú∫ÊôØÊµãËØï</div>
                        </div>
                    </div>
                    
                    <!-- Âú∫ÊôØÁÆ°ÁêÜ -->
                    <div class="scenario-management">
                        <div class="api-list-header">
                            <h3 class="api-list-title">üé≠ Âú∫ÊôØÁÆ°ÁêÜ</h3>
                            <button class="btn btn-primary" onclick="createNewScenario()">ÂàõÂª∫Âú∫ÊôØ</button>
                        </div>
                        
                        <div class="scenario-list" id="scenarioList">
                            ${renderScenarioList()}
                        </div>
                    </div>
                    
                    <!-- Âú∫ÊôØÂàõÂª∫Âô® -->
                    <div class="scenario-creator" id="scenarioCreator" style="display: ${isCreatingScenario ? 'block' : 'none'}">
                        <div class="api-list-header">
                            <h3 class="api-list-title">üõ†Ô∏è ${currentScenario ? 'ÁºñËæëÂú∫ÊôØ' : 'ÂàõÂª∫Âú∫ÊôØ'}</h3>
                            <div>
                                <button class="btn btn-warning" onclick="cancelScenarioEdit()">ÂèñÊ∂à</button>
                                <button class="btn btn-success" onclick="saveScenario()">‰øùÂ≠ò</button>
                            </div>
                        </div>
                        
                        <div class="scenario-form">
                            <div class="form-group">
                                <label>Âú∫ÊôØÂêçÁß∞</label>
                                <input type="text" class="form-input" id="scenarioName" placeholder="ËØ∑ËæìÂÖ•Âú∫ÊôØÂêçÁß∞" value="${currentScenario ? currentScenario.name : ''}">
                            </div>
                            
                            <div class="form-group">
                                <label>Âú∫ÊôØÊèèËø∞</label>
                                <textarea class="form-input form-textarea" id="scenarioDesc" placeholder="ËØ∑ËæìÂÖ•Âú∫ÊôØÊèèËø∞">${currentScenario ? currentScenario.description : ''}</textarea>
                            </div>
                            
                            <div class="api-selection-container">
                                <!-- ÂèØÈÄâÊé•Âè£ÂàóË°® -->
                                <div class="available-apis">
                                    <div class="api-list-header">
                                        <h3 class="api-list-title">üìã ÂèØÈÄâÊé•Âè£</h3>
                                        <button class="btn btn-primary" onclick="selectAllApis()">ÂÖ®ÈÄâ</button>
                                    </div>
                                    <div id="availableApisList">
                                        ${renderAvailableApis(module)}
                                    </div>
                                </div>
                                
                                <!-- Âú∫ÊôØÊ≠•È™§ -->
                                <div class="selected-apis">
                                    <div class="api-list-header">
                                        <h3 class="api-list-title">üéØ Âú∫ÊôØÊ≠•È™§ <span id="selectedCount">(${selectedApis.length})</span></h3>
                                        <button class="btn btn-warning" onclick="clearSelected()">Ê∏ÖÁ©∫</button>
                                    </div>
                                    <div class="scenario-steps" id="scenarioSteps">
                                        ${renderScenarioSteps()}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="test-results">
                        <div class="result-header">
                            <h3 class="result-title">ÊµãËØïÁªìÊûú</h3>
                            <div class="result-stats">
                                <div class="stat-item">
                                    <div class="stat-number" id="totalTests">${testStats.total}</div>
                                    <div class="stat-label">ÊÄªÊµãËØï</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="passedTests">${testStats.passed}</div>
                                    <div class="stat-label">ÈÄöËøá</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="failedTests">${testStats.failed}</div>
                                    <div class="stat-label">Â§±Ë¥•</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="avgTime">${testStats.total > 0 ? Math.round(testStats.totalTime / testStats.total) : 0}ms</div>
                                    <div class="stat-label">Âπ≥ÂùáËÄóÊó∂</div>
                                </div>
                            </div>
                        </div>
                        <div id="testLog">
                            <p style="color: #b0b0b0; text-align: center; padding: 20px;">
                                ÂàõÂª∫Âú∫ÊôØÂπ∂ËøêË°åÊµãËØïÔºåÁªìÊûúÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫...
                            </p>
                        </div>
                    </div>
                `;
            } else {
                // ÊôÆÈÄöÊµãËØïÂíåÈ°∫Â∫èÊµãËØïËßÜÂõæ - Â∏¶Êé•Âè£ÈÄâÊã©ÂäüËÉΩ
                contentPanel.innerHTML = `
                    <div class="panel-header">
                        <h2 class="panel-title">${module.icon} ${module.name} - ${categoryTitle}</h2>
                        <p class="panel-subtitle">ÈÄâÊã©Êé•Âè£ËøõË°å${categoryTitle}</p>
                    </div>
                    
                    <div class="test-types">
                        <div class="test-type-card ${currentTestType === 'normal' ? 'active' : ''}" onclick="switchTestType('normal')">
                            <div class="test-type-icon">‚ö°</div>
                            <div class="test-type-title">ÊôÆÈÄöÊµãËØï</div>
                            <div class="test-type-desc">Âçï‰∏™Êé•Âè£Âø´ÈÄüÊµãËØï</div>
                        </div>
                        <div class="test-type-card ${currentTestType === 'sequence' ? 'active' : ''}" onclick="switchTestType('sequence')">
                            <div class="test-type-icon">üîÑ</div>
                            <div class="test-type-title">È°∫Â∫èÊµãËØï</div>
                            <div class="test-type-desc">ÊåâÈ°∫Â∫èÊâßË°åÂ§ö‰∏™Êé•Âè£</div>
                        </div>
                        <div class="test-type-card" onclick="switchTestType('scenario')">
                            <div class="test-type-icon">üéØ</div>
                            <div class="test-type-title">Âú∫ÊôØÊµãËØï</div>
                            <div class="test-type-desc">Â§çÊùÇ‰∏öÂä°Âú∫ÊôØÊµãËØï</div>
                        </div>
                    </div>
                    
                    <div class="api-selection-container">
                        <!-- ÂèØÈÄâÊé•Âè£ÂàóË°® -->
                        <div class="available-apis">
                            <div class="api-list-header">
                                <h3 class="api-list-title">üìã ÂèØÈÄâÊé•Âè£</h3>
                                <button class="btn btn-primary" onclick="selectAllApis()">ÂÖ®ÈÄâ</button>
                            </div>
                            <div id="availableApisList">
                                ${renderAvailableApis(module)}
                            </div>
                        </div>
                        
                        <!-- Â∑≤ÈÄâÊã©ÁöÑÊµãËØïÊé•Âè£ -->
                        <div class="selected-apis">
                            <div class="api-list-header">
                                <h3 class="api-list-title">‚úÖ ÊµãËØïÂàóË°® <span id="selectedCount">(${selectedApis.length})</span></h3>
                                <div>
                                    <button class="btn btn-warning" onclick="clearSelected()">Ê∏ÖÁ©∫</button>
                                    <button class="btn btn-success" onclick="runSelectedTests()">ÂºÄÂßãÊµãËØï</button>
                                </div>
                            </div>
                            <div id="selectedApisList">
                                ${renderSelectedApis()}
                            </div>
                        </div>
                    </div>
                    
                    <div class="test-results">
                        <div class="result-header">
                            <h3 class="result-title">ÊµãËØïÁªìÊûú</h3>
                            <div class="result-stats">
                                <div class="stat-item">
                                    <div class="stat-number" id="totalTests">${testStats.total}</div>
                                    <div class="stat-label">ÊÄªÊµãËØï</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="passedTests">${testStats.passed}</div>
                                    <div class="stat-label">ÈÄöËøá</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="failedTests">${testStats.failed}</div>
                                    <div class="stat-label">Â§±Ë¥•</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="avgTime">${testStats.total > 0 ? Math.round(testStats.totalTime / testStats.total) : 0}ms</div>
                                    <div class="stat-label">Âπ≥ÂùáËÄóÊó∂</div>
                                </div>
                            </div>
                        </div>
                        <div id="testLog">
                            <p style="color: #b0b0b0; text-align: center; padding: 20px;">
                                ÈÄâÊã©Êé•Âè£ÂºÄÂßãÊµãËØïÔºåÁªìÊûúÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫...
                            </p>
                        </div>
                    </div>
                `;
            }
        }

        // Ê∏≤ÊüìÂèØÈÄâÊé•Âè£ÂàóË°®
        function renderAvailableApis(module) {
            const categories = module.categories || [];
            const apis = module.apis || [];
            
            let html = '';
            
            // ÊåâÂàÜÁ±ªÂàÜÁªÑÊòæÁ§∫
            categories.forEach(category => {
                const categoryApis = apis.filter(api => api.categoryId === category.id);
                if (categoryApis.length > 0) {
                    html += `
                        <div class="category-section" style="--category-color: ${category.color}; margin-bottom: 10px;">
                            <div class="category-section-header" onclick="toggleCategorySection('available_${category.id}')">
                                <div class="category-section-title">
                                    <div class="category-color" style="background-color: ${category.color}"></div>
                                    ${category.name} (${categoryApis.length})
                                </div>
                                <div class="category-section-toggle">‚ñº</div>
                            </div>
                            <div class="category-section-content">
                                ${categoryApis.map((api, index) => {
                                    const apiId = `${category.id}_${index}`;
                                    const isSelected = selectedApis.some(selected => selected.id === apiId);
                                    return `
                                        <div class="api-item-selectable ${isSelected ? 'selected' : ''}" onclick="toggleApiSelection('${apiId}')">
                                            <div class="api-checkbox ${isSelected ? 'checked' : ''}" id="checkbox_${apiId}"></div>
                                            <span class="api-method method-${api.method.toLowerCase()}">${api.method}</span>
                                            <div class="api-info">
                                                <div class="api-name">${api.name}</div>
                                                <div class="api-url">${api.url}</div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    `;
                }
            });
            
            // Êú™ÂàÜÁ±ªÁöÑÊé•Âè£
            const uncategorizedApis = apis.filter(api => !api.categoryId || !categories.find(cat => cat.id === api.categoryId));
            if (uncategorizedApis.length > 0) {
                html += `
                    <div class="category-section uncategorized-section" style="margin-bottom: 10px;">
                        <div class="category-section-header" onclick="toggleCategorySection('available_uncategorized')">
                            <div class="category-section-title">
                                <div class="category-color" style="background-color: #6c757d"></div>
                                Êú™ÂàÜÁ±ª (${uncategorizedApis.length})
                            </div>
                            <div class="category-section-toggle">‚ñº</div>
                        </div>
                        <div class="category-section-content">
                            ${uncategorizedApis.map((api, index) => {
                                const apiId = `uncategorized_${index}`;
                                const isSelected = selectedApis.some(selected => selected.id === apiId);
                                return `
                                    <div class="api-item-selectable ${isSelected ? 'selected' : ''}" onclick="toggleApiSelection('${apiId}')">
                                        <div class="api-checkbox ${isSelected ? 'checked' : ''}" id="checkbox_${apiId}"></div>
                                        <span class="api-method method-${api.method.toLowerCase()}">${api.method}</span>
                                        <div class="api-info">
                                            <div class="api-name">${api.name}</div>
                                            <div class="api-url">${api.url}</div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }
            
            return html || '<div class="empty-state"><p>ÊöÇÊó†Êé•Âè£ÔºåÁÇπÂáª"ÂØºÂÖ•Êé•Âè£"ÂºÄÂßãÊ∑ªÂä†</p></div>';
        }

        // Ê∏≤ÊüìÂ∑≤ÈÄâÊã©ÁöÑÊé•Âè£ÂàóË°®
        function renderSelectedApis() {
            if (selectedApis.length === 0) {
                return '<div class="empty-state"><p>ËØ∑‰ªéÂ∑¶‰æßÈÄâÊã©Ë¶ÅÊµãËØïÁöÑÊé•Âè£</p></div>';
            }
            
            return selectedApis.map((api, index) => `
                <div class="selected-api-item" data-api-id="${api.id}">
                    <div class="drag-handle">‚ãÆ‚ãÆ</div>
                    <span class="api-method method-${api.method.toLowerCase()}">${api.method}</span>
                    <div class="api-info">
                        <div class="api-name">${api.name}</div>
                        <div class="api-url">${api.url}</div>
                    </div>
                    <div class="order-controls">
                        <button class="order-btn" onclick="moveApiUp(${index})" ${index === 0 ? 'disabled' : ''}>‚Üë</button>
                        <button class="order-btn" onclick="moveApiDown(${index})" ${index === selectedApis.length - 1 ? 'disabled' : ''}>‚Üì</button>
                    </div>
                    <button class="remove-btn" onclick="removeSelectedApi('${api.id}')">ÁßªÈô§</button>
                    <span class="api-status status-ready" id="status_${api.id}">Â∞±Áª™</span>
                </div>
            `).join('');
        }

        // Ê∏≤ÊüìÂú∫ÊôØÂàóË°®
        function renderScenarioList() {
            if (scenarios.length === 0) {
                return '<div class="empty-state"><p>ÊöÇÊó†Âú∫ÊôØÔºåÁÇπÂáª"ÂàõÂª∫Âú∫ÊôØ"ÂºÄÂßãÂàõÂª∫</p></div>';
            }
            
            return scenarios.map(scenario => `
                <div class="scenario-card ${currentScenario && currentScenario.id === scenario.id ? 'active' : ''}" onclick="selectScenario('${scenario.id}')">
                    <div class="scenario-header">
                        <div class="scenario-name">${scenario.name}</div>
                        <div class="scenario-actions">
                            <button class="scenario-btn edit" onclick="editScenario('${scenario.id}', event)">ÁºñËæë</button>
                            <button class="scenario-btn run" onclick="runScenario('${scenario.id}', event)">ËøêË°å</button>
                            <button class="scenario-btn delete" onclick="deleteScenario('${scenario.id}', event)">Âà†Èô§</button>
                        </div>
                    </div>
                    <div class="scenario-info">
                        ${scenario.description || 'Êó†ÊèèËø∞'} ‚Ä¢ ${scenario.steps.length} ‰∏™Ê≠•È™§ ‚Ä¢ ÂàõÂª∫‰∫é ${new Date(scenario.createdAt).toLocaleDateString()}
                    </div>
                    <div class="scenario-apis">
                        ${scenario.steps.map(step => `<span class="scenario-api-tag">${step.method} ${step.name}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Ê∏≤ÊüìÂú∫ÊôØÊ≠•È™§
        function renderScenarioSteps() {
            if (selectedApis.length === 0) {
                return '<div class="empty-state"><p>ËØ∑‰ªéÂ∑¶‰æßÈÄâÊã©Êé•Âè£Êù•ÊûÑÂª∫Âú∫ÊôØÊ≠•È™§</p></div>';
            }
            
            return selectedApis.map((api, index) => `
                <div class="scenario-step" data-step-index="${index}">
                    <div class="step-number">${index + 1}</div>
                    <div class="step-content">
                        <div class="step-api">
                            <span class="api-method method-${api.method.toLowerCase()}">${api.method}</span>
                            ${api.name}
                        </div>
                        <div class="step-params">
                            ${api.url}
                            ${api.paramMappings ? ` ‚Ä¢ ${api.paramMappings.length} ‰∏™ÂèÇÊï∞Êò†Â∞Ñ` : ''}
                        </div>
                    </div>
                    <div class="step-actions">
                        <button class="step-btn" onclick="configStepParams(${index})">ÈÖçÁΩÆÂèÇÊï∞</button>
                        <button class="step-btn" onclick="moveApiUp(${index})" ${index === 0 ? 'disabled' : ''}>‰∏äÁßª</button>
                        <button class="step-btn" onclick="moveApiDown(${index})" ${index === selectedApis.length - 1 ? 'disabled' : ''}>‰∏ãÁßª</button>
                        <button class="step-btn" onclick="removeSelectedApi('${api.id}')">ÁßªÈô§</button>
                    </div>
                </div>
                ${api.showParamConfig ? renderParamConfig(index) : ''}
            `).join('');
        }

        // Ê∏≤ÊüìÂèÇÊï∞ÈÖçÁΩÆ
        function renderParamConfig(stepIndex) {
            const api = selectedApis[stepIndex];
            const paramMappings = api.paramMappings || [];
            
            return `
                <div class="param-config" id="paramConfig_${stepIndex}">
                    <div class="param-config-header">
                        <div class="param-config-title">Ê≠•È™§ ${stepIndex + 1} - ÂèÇÊï∞ÈÖçÁΩÆ</div>
                        <button class="step-btn" onclick="hideParamConfig(${stepIndex})">Êî∂Ëµ∑</button>
                    </div>
                    
                    <div class="param-mapping">
                        ${paramMappings.map((mapping, mappingIndex) => `
                            <div class="param-row">
                                <select class="param-select" onchange="updateParamMapping(${stepIndex}, ${mappingIndex}, 'source', this.value)">
                                    <option value="">ÈÄâÊã©Êù•Ê∫êÂèÇÊï∞</option>
                                    ${getSourceParams(stepIndex).map(param => 
                                        `<option value="${param.value}" ${mapping.source === param.value ? 'selected' : ''}>${param.label}</option>`
                                    ).join('')}
                                </select>
                                <div class="param-arrow">‚Üí</div>
                                <select class="param-select" onchange="updateParamMapping(${stepIndex}, ${mappingIndex}, 'target', this.value)">
                                    <option value="">ÈÄâÊã©ÁõÆÊ†áÂèÇÊï∞</option>
                                    ${getTargetParams(api).map(param => 
                                        `<option value="${param.value}" ${mapping.target === param.value ? 'selected' : ''}>${param.label}</option>`
                                    ).join('')}
                                </select>
                                <button class="remove-param-btn" onclick="removeParamMapping(${stepIndex}, ${mappingIndex})">Âà†Èô§</button>
                            </div>
                        `).join('')}
                    </div>
                    
                    <button class="add-param-btn" onclick="addParamMapping(${stepIndex})">Ê∑ªÂä†ÂèÇÊï∞Êò†Â∞Ñ</button>
                </div>
            `;
        }

        // ÊµãËØïAPI
        function testApi(apiName) {
            const apiItem = event.target.closest('.api-item');
            const statusElement = apiItem.querySelector('.api-status');
            const testLog = document.getElementById('testLog');
            
            // Êõ¥Êñ∞Áä∂ÊÄÅ‰∏∫ÊµãËØï‰∏≠
            statusElement.textContent = 'ÊµãËØï‰∏≠';
            statusElement.className = 'api-status status-testing';
            
            // Ê®°ÊãüAPIÊµãËØï
            const startTime = Date.now();
            setTimeout(() => {
                const endTime = Date.now();
                const duration = endTime - startTime;
                const success = Math.random() > 0.2; // 80% ÊàêÂäüÁéá
                
                // Êõ¥Êñ∞ÁªüËÆ°
                testStats.total++;
                testStats.totalTime += duration;
                if (success) {
                    testStats.passed++;
                    statusElement.textContent = 'ÊàêÂäü';
                    statusElement.className = 'api-status status-success';
                } else {
                    testStats.failed++;
                    statusElement.textContent = 'Â§±Ë¥•';
                    statusElement.className = 'api-status status-failed';
                }
                
                // Êõ¥Êñ∞ÁªüËÆ°ÊòæÁ§∫
                updateStats();
                
                // Ê∑ªÂä†ÊµãËØïÊó•Âøó
                const logEntry = document.createElement('div');
                logEntry.style.cssText = `
                    padding: 10px;
                    margin: 5px 0;
                    background: ${success ? 'rgba(40, 167, 69, 0.2)' : 'rgba(220, 53, 69, 0.2)'};
                    border-left: 4px solid ${success ? '#28a745' : '#dc3545'};
                    border-radius: 4px;
                    font-family: 'Courier New', monospace;
                    font-size: 14px;
                `;
                logEntry.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span>${success ? '‚úÖ' : '‚ùå'} ${apiName}</span>
                        <span style="color: #b0b0b0;">${duration}ms</span>
                    </div>
                    <div style="font-size: 12px; color: #b0b0b0; margin-top: 5px;">
                        ${new Date().toLocaleTimeString()} - ${success ? 'ÊµãËØïÈÄöËøá' : 'ÊµãËØïÂ§±Ë¥•'}
                    </div>
                `;
                
                if (testLog.children.length === 1 && testLog.children[0].tagName === 'P') {
                    testLog.innerHTML = '';
                }
                testLog.appendChild(logEntry);
                testLog.scrollTop = testLog.scrollHeight;
                
            }, Math.random() * 2000 + 500); // 0.5-2.5ÁßíÈöèÊú∫Âª∂Ëøü
        }

        // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
        function updateStats() {
            document.getElementById('totalTests').textContent = testStats.total;
            document.getElementById('passedTests').textContent = testStats.passed;
            document.getElementById('failedTests').textContent = testStats.failed;
            document.getElementById('avgTime').textContent = 
                testStats.total > 0 ? Math.round(testStats.totalTime / testStats.total) + 'ms' : '0ms';
        }

        // ÊâπÈáèÊµãËØï
        function runAllTests() {
            const apiItems = document.querySelectorAll('.api-item');
            apiItems.forEach((item, index) => {
                setTimeout(() => {
                    item.click();
                }, index * 1000); // ÊØèÁßíÊâßË°å‰∏Ä‰∏™
            });
        }

        // ‰øùÂ≠òÈÖçÁΩÆ
        function saveConfig() {
            const environment = document.getElementById('environment').value;
            const host = document.getElementById('host').value;
            const token = document.getElementById('token').value;
            
            // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†‰øùÂ≠òÈÖçÁΩÆÁöÑÈÄªËæë
            alert(`ÈÖçÁΩÆÂ∑≤‰øùÂ≠òÔºÅ\nÁéØÂ¢É: ${environment}\nHost: ${host}\nToken: ${token ? 'Â∑≤ËÆæÁΩÆ' : 'Êú™ËÆæÁΩÆ'}`);
        }

        // ÊòæÁ§∫ËÆæÁΩÆ
        function showSettings() {
            alert('ÂÖ®Â±ÄÈÖçÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        // ÊòæÁ§∫ÂèòÈáèÁÆ°ÁêÜ
        function showVariables() {
            alert('ÂèòÈáèÁÆ°ÁêÜÂäüËÉΩÂºÄÂèë‰∏≠...');
        }

        // ÂàáÊç¢Êé•Âè£ÈÄâÊã©Áä∂ÊÄÅ
        function toggleApiSelection(apiId) {
            const api = findApiById(apiId);
            
            if (!api) {
                alert('Êé•Âè£‰∏çÂ≠òÂú®ÔºÅ');
                return;
            }
            
            const existingIndex = selectedApis.findIndex(selected => selected.id === apiId);
            
            if (existingIndex >= 0) {
                // ÂèñÊ∂àÈÄâÊã©
                selectedApis.splice(existingIndex, 1);
            } else {
                // Ê∑ªÂä†ÈÄâÊã©
                selectedApis.push({
                    id: apiId,
                    module: currentModule,
                    method: api.method,
                    name: api.name,
                    url: api.url,
                    categoryId: api.categoryId
                });
            }
            
            // ÈáçÊñ∞Ê∏≤Êüì
            updateApiSelection();
        }

        // Êõ¥Êñ∞Êé•Âè£ÈÄâÊã©ÊòæÁ§∫
        function updateApiSelection() {
            const availableList = document.getElementById('availableApisList');
            const selectedList = document.getElementById('selectedApisList');
            const selectedCount = document.getElementById('selectedCount');
            
            if (availableList) {
                availableList.innerHTML = renderAvailableApis(moduleData[currentModule]);
            }
            if (selectedList) {
                selectedList.innerHTML = renderSelectedApis();
            }
            if (selectedCount) {
                selectedCount.textContent = `(${selectedApis.length})`;
            }
        }

        // ÂÖ®ÈÄâÊé•Âè£
        function selectAllApis() {
            const module = moduleData[currentModule];
            const categories = module.categories || [];
            const apis = module.apis || [];
            
            selectedApis = [];
            
            // Ê∑ªÂä†ÂàÜÁ±ª‰∏≠ÁöÑÊé•Âè£
            categories.forEach(category => {
                const categoryApis = apis.filter(api => api.categoryId === category.id);
                categoryApis.forEach((api, index) => {
                    selectedApis.push({
                        id: `${category.id}_${index}`,
                        module: currentModule,
                        method: api.method,
                        name: api.name,
                        url: api.url,
                        categoryId: api.categoryId
                    });
                });
            });
            
            // Ê∑ªÂä†Êú™ÂàÜÁ±ªÁöÑÊé•Âè£
            const uncategorizedApis = apis.filter(api => !api.categoryId || !categories.find(cat => cat.id === api.categoryId));
            uncategorizedApis.forEach((api, index) => {
                selectedApis.push({
                    id: `uncategorized_${index}`,
                    module: currentModule,
                    method: api.method,
                    name: api.name,
                    url: api.url,
                    categoryId: api.categoryId
                });
            });
            
            updateApiSelection();
        }

        // Ê∏ÖÁ©∫ÈÄâÊã©
        function clearSelected() {
            selectedApis = [];
            updateApiSelection();
        }

        // ÁßªÈô§Âçï‰∏™ÈÄâÊã©ÁöÑÊé•Âè£
        function removeSelectedApi(apiId) {
            const index = selectedApis.findIndex(api => api.id === apiId);
            if (index >= 0) {
                selectedApis.splice(index, 1);
                updateApiSelection();
            }
        }

        // ‰∏äÁßªÊé•Âè£
        function moveApiUp(index) {
            if (index > 0) {
                const temp = selectedApis[index];
                selectedApis[index] = selectedApis[index - 1];
                selectedApis[index - 1] = temp;
                updateApiSelection();
            }
        }

        // ‰∏ãÁßªÊé•Âè£
        function moveApiDown(index) {
            if (index < selectedApis.length - 1) {
                const temp = selectedApis[index];
                selectedApis[index] = selectedApis[index + 1];
                selectedApis[index + 1] = temp;
                updateApiSelection();
            }
        }

        // ËøêË°åÈÄâÊã©ÁöÑÊµãËØï
        function runSelectedTests() {
            if (selectedApis.length === 0) {
                alert('ËØ∑ÂÖàÈÄâÊã©Ë¶ÅÊµãËØïÁöÑÊé•Âè£ÔºÅ');
                return;
            }

            const testLog = document.getElementById('testLog');
            testLog.innerHTML = '<p style="color: #00d4ff; text-align: center; padding: 10px;">ÂºÄÂßãÊâßË°åÊµãËØï...</p>';

            if (currentTestType === 'sequence') {
                // È°∫Â∫èÊµãËØï - ‰∏Ä‰∏™Êé•‰∏Ä‰∏™ÊâßË°å
                runSequenceTests();
            } else if (currentTestType === 'scenario') {
                // Âú∫ÊôØÊµãËØï - Â∏¶ÂèÇÊï∞‰º†ÈÄí
                runScenarioTests();
            } else {
                // ÊôÆÈÄöÊµãËØï - Âπ∂Ë°åÊâßË°å
                runParallelTests();
            }
        }

        // È°∫Â∫èÊµãËØï
        function runSequenceTests() {
            let currentIndex = 0;
            
            function runNext() {
                if (currentIndex >= selectedApis.length) {
                    addTestLog('‚úÖ È°∫Â∫èÊµãËØïÂÆåÊàêÔºÅ', 'success');
                    return;
                }
                
                const api = selectedApis[currentIndex];
                addTestLog(`üîÑ Ê≠£Âú®ÊµãËØï: ${api.name}`, 'info');
                
                testSelectedApi(api, () => {
                    currentIndex++;
                    setTimeout(runNext, 1000); // Èó¥Èöî1ÁßíÊâßË°å‰∏ã‰∏Ä‰∏™
                });
            }
            
            runNext();
        }

        // Âú∫ÊôØÊµãËØï
        function runScenarioTests() {
            addTestLog('üéØ ÂºÄÂßãÂú∫ÊôØÊµãËØï - Êô∫ËÉΩÂèÇÊï∞‰º†ÈÄí', 'info');
            let scenarioData = {}; // Â≠òÂÇ®Âú∫ÊôØÊï∞ÊçÆ
            
            selectedApis.forEach((api, index) => {
                setTimeout(() => {
                    addTestLog(`üìã Âú∫ÊôØÊ≠•È™§ ${index + 1}: ${api.name}`, 'info');
                    
                    // Â§ÑÁêÜÂèÇÊï∞Êò†Â∞Ñ
                    if (api.paramMappings && api.paramMappings.length > 0) {
                        const mappingInfo = api.paramMappings.map(mapping => 
                            `${mapping.source} ‚Üí ${mapping.target}`
                        ).join(', ');
                        addTestLog(`üîó ÂèÇÊï∞Êò†Â∞Ñ: ${mappingInfo}`, 'info');
                        
                        // Ê®°ÊãüÂèÇÊï∞ÊõøÊç¢
                        api.paramMappings.forEach(mapping => {
                            if (mapping.source && mapping.target) {
                                const sourceValue = getParameterValue(mapping.source, scenarioData, index);
                                addTestLog(`üìù ${mapping.target} = ${sourceValue}`, 'info');
                            }
                        });
                    }
                    
                    testSelectedApi(api, (result) => {
                        // Ê®°Êãü‰øùÂ≠òËøîÂõûÊï∞ÊçÆ‰æõ‰∏ã‰∏ÄÊ≠•‰ΩøÁî®
                        scenarioData[`step${index + 1}`] = {
                            response: {
                                id: Math.floor(Math.random() * 1000),
                                data: `mock_data_${index + 1}`,
                                status: result ? 200 : 500,
                                timestamp: Date.now()
                            },
                            result: result
                        };
                        
                        addTestLog(`üíæ Ê≠•È™§${index + 1}ËøîÂõûÊï∞ÊçÆÂ∑≤‰øùÂ≠ò`, 'info');
                        
                        if (index === selectedApis.length - 1) {
                            addTestLog('üéØ Âú∫ÊôØÊµãËØïÂÆåÊàêÔºÅ', 'success');
                            addTestLog(`üìä Âú∫ÊôØÊï∞ÊçÆ: ${JSON.stringify(scenarioData, null, 2)}`, 'info');
                        }
                    });
                }, index * 1500); // Èó¥Èöî1.5Áßí
            });
        }

        // Ëé∑ÂèñÂèÇÊï∞ÂÄº
        function getParameterValue(paramPath, scenarioData, currentStep) {
            if (paramPath.startsWith('global.')) {
                // ÂÖ®Â±ÄÂèÇÊï∞
                const globalKey = paramPath.split('.')[1];
                switch(globalKey) {
                    case 'host': return document.getElementById('host').value || 'https://api.example.com';
                    case 'token': return document.getElementById('token').value || 'mock_token_123';
                    case 'userId': return 'user_' + Math.floor(Math.random() * 1000);
                    default: return 'global_value';
                }
            } else if (paramPath.startsWith('step')) {
                // ÂâçÈù¢Ê≠•È™§ÁöÑËøîÂõûÂÄº
                const stepMatch = paramPath.match(/step(\d+)\.(.+)/);
                if (stepMatch) {
                    const stepNum = parseInt(stepMatch[1]);
                    const valuePath = stepMatch[2];
                    const stepData = scenarioData[`step${stepNum}`];
                    
                    if (stepData) {
                        // ÁÆÄÂçïÁöÑË∑ØÂæÑËß£Êûê
                        const pathParts = valuePath.split('.');
                        let value = stepData;
                        for (const part of pathParts) {
                            value = value[part];
                            if (value === undefined) break;
                        }
                        return value || `mock_${valuePath}_${stepNum}`;
                    }
                }
                return `mock_step_value_${currentStep}`;
            }
            return 'unknown_value';
        }

        // Âπ∂Ë°åÊµãËØï
        function runParallelTests() {
            addTestLog('‚ö° ÂºÄÂßãÂπ∂Ë°åÊµãËØï', 'info');
            selectedApis.forEach(api => {
                testSelectedApi(api);
            });
        }

        // ÊµãËØïÈÄâÊã©ÁöÑAPI
        function testSelectedApi(api, callback) {
            const statusElement = document.getElementById(`status_${api.id}`);
            if (statusElement) {
                statusElement.textContent = 'ÊµãËØï‰∏≠';
                statusElement.className = 'api-status status-testing';
            }
            
            const startTime = Date.now();
            setTimeout(() => {
                const endTime = Date.now();
                const duration = endTime - startTime;
                const success = Math.random() > 0.2; // 80% ÊàêÂäüÁéá
                
                // Êõ¥Êñ∞ÁªüËÆ°
                testStats.total++;
                testStats.totalTime += duration;
                if (success) {
                    testStats.passed++;
                    if (statusElement) {
                        statusElement.textContent = 'ÊàêÂäü';
                        statusElement.className = 'api-status status-success';
                    }
                } else {
                    testStats.failed++;
                    if (statusElement) {
                        statusElement.textContent = 'Â§±Ë¥•';
                        statusElement.className = 'api-status status-failed';
                    }
                }
                
                // Êõ¥Êñ∞ÁªüËÆ°ÊòæÁ§∫
                updateStats();
                
                // Ê∑ªÂä†ÊµãËØïÊó•Âøó
                addTestLog(
                    `${success ? '‚úÖ' : '‚ùå'} ${api.name} - ${duration}ms`,
                    success ? 'success' : 'error'
                );
                
                if (callback) callback(success);
                
            }, Math.random() * 2000 + 500); // 0.5-2.5ÁßíÈöèÊú∫Âª∂Ëøü
        }

        // Ê∑ªÂä†ÊµãËØïÊó•Âøó
        function addTestLog(message, type = 'info') {
            const testLog = document.getElementById('testLog');
            if (!testLog) return;
            
            const logEntry = document.createElement('div');
            let bgColor, borderColor;
            
            switch(type) {
                case 'success':
                    bgColor = 'rgba(40, 167, 69, 0.2)';
                    borderColor = '#28a745';
                    break;
                case 'error':
                    bgColor = 'rgba(220, 53, 69, 0.2)';
                    borderColor = '#dc3545';
                    break;
                case 'info':
                    bgColor = 'rgba(0, 212, 255, 0.2)';
                    borderColor = '#00d4ff';
                    break;
                default:
                    bgColor = 'rgba(108, 117, 125, 0.2)';
                    borderColor = '#6c757d';
            }
            
            logEntry.style.cssText = `
                padding: 10px;
                margin: 5px 0;
                background: ${bgColor};
                border-left: 4px solid ${borderColor};
                border-radius: 4px;
                font-family: 'Courier New', monospace;
                font-size: 14px;
            `;
            logEntry.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span>${message}</span>
                    <span style="color: #b0b0b0; font-size: 12px;">${new Date().toLocaleTimeString()}</span>
                </div>
            `;
            
            if (testLog.children.length === 1 && testLog.children[0].tagName === 'P') {
                testLog.innerHTML = '';
            }
            testLog.appendChild(logEntry);
            testLog.scrollTop = testLog.scrollHeight;
        }

        // Âú∫ÊôØÁÆ°ÁêÜÂáΩÊï∞
        
        // ÂàõÂª∫Êñ∞Âú∫ÊôØ
        function createNewScenario() {
            isCreatingScenario = true;
            currentScenario = null;
            selectedApis = [];
            renderContent();
        }

        // ÁºñËæëÂú∫ÊôØ
        function editScenario(scenarioId, event) {
            event.stopPropagation();
            const scenario = scenarios.find(s => s.id === scenarioId);
            if (scenario) {
                currentScenario = scenario;
                isCreatingScenario = true;
                selectedApis = [...scenario.steps];
                renderContent();
            }
        }

        // ÈÄâÊã©Âú∫ÊôØ
        function selectScenario(scenarioId) {
            const scenario = scenarios.find(s => s.id === scenarioId);
            if (scenario) {
                currentScenario = scenario;
                updateScenarioList();
            }
        }

        // Âà†Èô§Âú∫ÊôØ
        function deleteScenario(scenarioId, event) {
            event.stopPropagation();
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Âú∫ÊôØÂêóÔºü')) {
                scenarios = scenarios.filter(s => s.id !== scenarioId);
                if (currentScenario && currentScenario.id === scenarioId) {
                    currentScenario = null;
                }
                updateScenarioList();
            }
        }

        // ËøêË°åÂú∫ÊôØ
        function runScenario(scenarioId, event) {
            event.stopPropagation();
            const scenario = scenarios.find(s => s.id === scenarioId);
            if (scenario) {
                selectedApis = [...scenario.steps];
                runScenarioTests();
            }
        }

        // ‰øùÂ≠òÂú∫ÊôØ
        function saveScenario() {
            const name = document.getElementById('scenarioName').value.trim();
            const description = document.getElementById('scenarioDesc').value.trim();
            
            if (!name) {
                alert('ËØ∑ËæìÂÖ•Âú∫ÊôØÂêçÁß∞ÔºÅ');
                return;
            }
            
            if (selectedApis.length === 0) {
                alert('ËØ∑Ëá≥Â∞ëÈÄâÊã©‰∏Ä‰∏™Êé•Âè£ÔºÅ');
                return;
            }
            
            const scenario = {
                id: currentScenario ? currentScenario.id : 'scenario_' + Date.now(),
                name: name,
                description: description,
                steps: selectedApis.map(api => ({...api})),
                module: currentModule,
                createdAt: currentScenario ? currentScenario.createdAt : Date.now(),
                updatedAt: Date.now()
            };
            
            if (currentScenario) {
                // Êõ¥Êñ∞Áé∞ÊúâÂú∫ÊôØ
                const index = scenarios.findIndex(s => s.id === currentScenario.id);
                scenarios[index] = scenario;
            } else {
                // ÂàõÂª∫Êñ∞Âú∫ÊôØ
                scenarios.push(scenario);
            }
            
            cancelScenarioEdit();
            alert('Âú∫ÊôØ‰øùÂ≠òÊàêÂäüÔºÅ');
        }

        // ÂèñÊ∂àÂú∫ÊôØÁºñËæë
        function cancelScenarioEdit() {
            isCreatingScenario = false;
            currentScenario = null;
            selectedApis = [];
            renderContent();
        }

        // Êõ¥Êñ∞Âú∫ÊôØÂàóË°®ÊòæÁ§∫
        function updateScenarioList() {
            const scenarioList = document.getElementById('scenarioList');
            if (scenarioList) {
                scenarioList.innerHTML = renderScenarioList();
            }
        }

        // ÈÖçÁΩÆÊ≠•È™§ÂèÇÊï∞
        function configStepParams(stepIndex) {
            selectedApis[stepIndex].showParamConfig = !selectedApis[stepIndex].showParamConfig;
            if (!selectedApis[stepIndex].paramMappings) {
                selectedApis[stepIndex].paramMappings = [];
            }
            updateScenarioSteps();
        }

        // ÈöêËóèÂèÇÊï∞ÈÖçÁΩÆ
        function hideParamConfig(stepIndex) {
            selectedApis[stepIndex].showParamConfig = false;
            updateScenarioSteps();
        }

        // Êõ¥Êñ∞Âú∫ÊôØÊ≠•È™§ÊòæÁ§∫
        function updateScenarioSteps() {
            const scenarioSteps = document.getElementById('scenarioSteps');
            if (scenarioSteps) {
                scenarioSteps.innerHTML = renderScenarioSteps();
            }
            updateSelectedCount();
        }

        // Ê∑ªÂä†ÂèÇÊï∞Êò†Â∞Ñ
        function addParamMapping(stepIndex) {
            if (!selectedApis[stepIndex].paramMappings) {
                selectedApis[stepIndex].paramMappings = [];
            }
            selectedApis[stepIndex].paramMappings.push({
                source: '',
                target: ''
            });
            updateScenarioSteps();
        }

        // ÁßªÈô§ÂèÇÊï∞Êò†Â∞Ñ
        function removeParamMapping(stepIndex, mappingIndex) {
            selectedApis[stepIndex].paramMappings.splice(mappingIndex, 1);
            updateScenarioSteps();
        }

        // Êõ¥Êñ∞ÂèÇÊï∞Êò†Â∞Ñ
        function updateParamMapping(stepIndex, mappingIndex, field, value) {
            selectedApis[stepIndex].paramMappings[mappingIndex][field] = value;
        }

        // Ëé∑ÂèñÊù•Ê∫êÂèÇÊï∞ÈÄâÈ°π
        function getSourceParams(currentStepIndex) {
            const params = [];
            
            // Ê∑ªÂä†ÂÖ®Â±ÄÂèòÈáè
            params.push(
                { value: 'global.host', label: 'ÂÖ®Â±Ä - HostÂú∞ÂùÄ' },
                { value: 'global.token', label: 'ÂÖ®Â±Ä - Token' },
                { value: 'global.userId', label: 'ÂÖ®Â±Ä - Áî®Êà∑ID' }
            );
            
            // Ê∑ªÂä†ÂâçÈù¢Ê≠•È™§ÁöÑËøîÂõûÂèÇÊï∞
            for (let i = 0; i < currentStepIndex; i++) {
                const step = selectedApis[i];
                params.push(
                    { value: `step${i + 1}.response.id`, label: `Ê≠•È™§${i + 1} - ËøîÂõûID` },
                    { value: `step${i + 1}.response.data`, label: `Ê≠•È™§${i + 1} - ËøîÂõûÊï∞ÊçÆ` },
                    { value: `step${i + 1}.response.status`, label: `Ê≠•È™§${i + 1} - Áä∂ÊÄÅÁ†Å` }
                );
            }
            
            return params;
        }

        // Ëé∑ÂèñÁõÆÊ†áÂèÇÊï∞ÈÄâÈ°π
        function getTargetParams(api) {
            const params = [];
            
            // Ê†πÊçÆÊé•Âè£Á±ªÂûãÊ∑ªÂä†Â∏∏ËßÅÂèÇÊï∞
            if (api.method === 'GET') {
                params.push(
                    { value: 'query.id', label: 'Êü•ËØ¢ÂèÇÊï∞ - ID' },
                    { value: 'query.page', label: 'Êü•ËØ¢ÂèÇÊï∞ - È°µÁ†Å' },
                    { value: 'query.size', label: 'Êü•ËØ¢ÂèÇÊï∞ - È°µÂ§ßÂ∞è' }
                );
            } else if (api.method === 'POST' || api.method === 'PUT') {
                params.push(
                    { value: 'body.id', label: 'ËØ∑Ê±Ç‰Ωì - ID' },
                    { value: 'body.name', label: 'ËØ∑Ê±Ç‰Ωì - ÂêçÁß∞' },
                    { value: 'body.data', label: 'ËØ∑Ê±Ç‰Ωì - Êï∞ÊçÆ' }
                );
            }
            
            // Ê∑ªÂä†ËØ∑Ê±ÇÂ§¥ÂèÇÊï∞
            params.push(
                { value: 'headers.Authorization', label: 'ËØ∑Ê±ÇÂ§¥ - Authorization' },
                { value: 'headers.Content-Type', label: 'ËØ∑Ê±ÇÂ§¥ - Content-Type' }
            );
            
            // Ê∑ªÂä†Ë∑ØÂæÑÂèÇÊï∞
            if (api.url.includes('{id}')) {
                params.push({ value: 'path.id', label: 'Ë∑ØÂæÑÂèÇÊï∞ - ID' });
            }
            
            return params;
        }

        // Êõ¥Êñ∞ÈÄâÊã©ËÆ°Êï∞
        function updateSelectedCount() {
            const selectedCount = document.getElementById('selectedCount');
            if (selectedCount) {
                selectedCount.textContent = `(${selectedApis.length})`;
            }
        }

        // ÈáçÂÜôÊõ¥Êñ∞Êé•Âè£ÈÄâÊã©ÊòæÁ§∫ÂáΩÊï∞‰ª•ÊîØÊåÅÂú∫ÊôØÊ≠•È™§
        function updateApiSelection() {
            const availableList = document.getElementById('availableApisList');
            const selectedList = document.getElementById('selectedApisList');
            const scenarioSteps = document.getElementById('scenarioSteps');
            
            if (availableList) {
                availableList.innerHTML = renderAvailableApis(moduleData[currentModule]);
            }
            if (selectedList) {
                selectedList.innerHTML = renderSelectedApis();
            }
            if (scenarioSteps) {
                scenarioSteps.innerHTML = renderScenarioSteps();
            }
            updateSelectedCount();
        }

        // ÂàùÂßãÂåñ‰∏Ä‰∫õÁ§∫‰æãÂú∫ÊôØ
        function initSampleScenarios() {
            scenarios = [
                {
                    id: 'scenario_exam_flow',
                    name: 'ËÄÉËØïÂÆåÊï¥ÊµÅÁ®ã',
                    description: '‰ªéËé∑ÂèñËÄÉËØïÂàóË°®Âà∞Êèê‰∫§Á≠îÊ°àÁöÑÂÆåÊï¥ÊµÅÁ®ãÊµãËØï',
                    module: 'exam',
                    steps: [
                        {
                            id: 'exam_0',
                            module: 'exam',
                            method: 'GET',
                            name: 'Ëé∑ÂèñËÄÉËØïÂàóË°®',
                            url: '/api/exam/list',
                            paramMappings: []
                        },
                        {
                            id: 'exam_1',
                            module: 'exam',
                            method: 'POST',
                            name: 'ÂàõÂª∫ËÄÉËØï',
                            url: '/api/exam/create',
                            paramMappings: [
                                { source: 'global.userId', target: 'body.creatorId' }
                            ]
                        },
                        {
                            id: 'exam_4',
                            module: 'exam',
                            method: 'POST',
                            name: 'Êèê‰∫§ËÄÉËØïÁ≠îÊ°à',
                            url: '/api/exam/submit',
                            paramMappings: [
                                { source: 'step2.response.id', target: 'body.examId' }
                            ]
                        }
                    ],
                    createdAt: Date.now() - 86400000,
                    updatedAt: Date.now() - 86400000
                },
                {
                    id: 'scenario_course_management',
                    name: 'ËØæÁ®ãÁÆ°ÁêÜÂú∫ÊôØ',
                    description: 'ËØæÁ®ãÁöÑÂàõÂª∫„ÄÅÊõ¥Êñ∞ÂíåÊü•ËØ¢ÊµÅÁ®ã',
                    module: 'course',
                    steps: [
                        {
                            id: 'course_1',
                            module: 'course',
                            method: 'POST',
                            name: 'ÂàõÂª∫ËØæÁ®ã',
                            url: '/api/course/create',
                            paramMappings: []
                        },
                        {
                            id: 'course_2',
                            module: 'course',
                            method: 'PUT',
                            name: 'Êõ¥Êñ∞ËØæÁ®ã‰ø°ÊÅØ',
                            url: '/api/course/update/{id}',
                            paramMappings: [
                                { source: 'step1.response.id', target: 'path.id' }
                            ]
                        }
                    ],
                    createdAt: Date.now() - 172800000,
                    updatedAt: Date.now() - 172800000
                }
            ];
        }

        // ÂØºÂÖ•Êé•Âè£ÊñáÊ°£ÂäüËÉΩ
        
        // ÊòæÁ§∫ÂØºÂÖ•Ê®°ÊÄÅÊ°Ü
        function showImportModal() {
            document.getElementById('importModal').style.display = 'flex';
            resetImportModal();
        }

        // ÈöêËóèÂØºÂÖ•Ê®°ÊÄÅÊ°Ü
        function hideImportModal() {
            document.getElementById('importModal').style.display = 'none';
            resetImportModal();
        }

        // ÈáçÁΩÆÂØºÂÖ•Ê®°ÊÄÅÊ°Ü
        function resetImportModal() {
            importedApis = [];
            currentImportType = 'swagger';
            document.getElementById('importPreview').style.display = 'none';
            document.getElementById('confirmImportBtn').disabled = true;
            
            // ÈáçÁΩÆÊâÄÊúâËæìÂÖ•
            document.getElementById('swaggerFile').value = '';
            document.getElementById('postmanFile').value = '';
            document.getElementById('jsonEditor').value = '';
            document.getElementById('docUrl').value = '';
            
            // ÈáçÁΩÆAIÁõ∏ÂÖ≥ËæìÂÖ•
            document.getElementById('aiApiKey').value = '';
            document.getElementById('aiDescription').value = '';
            document.getElementById('aiDocUrl').value = '';
            document.getElementById('aiDocFile').value = '';
            aiDocumentContent = '';
            hideAiProgress();
            
            // ÈáçÁΩÆÊ†áÁ≠æÈ°µ
            switchImportTab('swagger');
        }

        // ÂàáÊç¢ÂØºÂÖ•Ê†áÁ≠æÈ°µ
        function switchImportTab(type) {
            currentImportType = type;
            
            // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÁä∂ÊÄÅ
            document.querySelectorAll('.import-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[onclick="switchImportTab('${type}')"]`).classList.add('active');
            
            // Êõ¥Êñ∞ÂÜÖÂÆπÂå∫Âüü
            document.querySelectorAll('.import-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${type}-content`).classList.add('active');
        }

        // Â§ÑÁêÜÊñá‰ª∂ÊãñÊãΩ
        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('dragover');
        }

        function handleFileDrop(event, type) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                processFile(files[0], type);
            }
        }

        // Â§ÑÁêÜÊñá‰ª∂ÈÄâÊã©
        function handleFileSelect(event, type) {
            const file = event.target.files[0];
            if (file) {
                processFile(file, type);
            }
        }

        // Â§ÑÁêÜÊñá‰ª∂
        function processFile(file, type) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const content = e.target.result;
                    let parsedData;
                    
                    if (file.name.endsWith('.yaml') || file.name.endsWith('.yml')) {
                        // ÁÆÄÂçïÁöÑYAMLËß£ÊûêÔºàÂÆûÈôÖÈ°πÁõÆ‰∏≠Â∫î‰ΩøÁî®‰∏ìÈó®ÁöÑYAMLËß£ÊûêÂ∫ìÔºâ
                        alert('YAMLÊ†ºÂºèÊöÇ‰∏çÊîØÊåÅÔºåËØ∑ËΩ¨Êç¢‰∏∫JSONÊ†ºÂºèÂêéÈáçËØï');
                        return;
                    } else {
                        parsedData = JSON.parse(content);
                    }
                    
                    if (type === 'swagger') {
                        parseSwaggerDoc(parsedData);
                    } else if (type === 'postman') {
                        parsePostmanCollection(parsedData);
                    }
                } catch (error) {
                    alert('Êñá‰ª∂Ëß£ÊûêÂ§±Ë¥•Ôºö' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // Ëß£ÊûêSwagger/OpenAPIÊñáÊ°£
        function parseSwaggerDoc(swaggerDoc) {
            const apis = [];
            
            try {
                const basePath = swaggerDoc.basePath || '';
                const paths = swaggerDoc.paths || {};
                
                Object.keys(paths).forEach(path => {
                    const pathItem = paths[path];
                    Object.keys(pathItem).forEach(method => {
                        if (['get', 'post', 'put', 'delete', 'patch'].includes(method.toLowerCase())) {
                            const operation = pathItem[method];
                            apis.push({
                                method: method.toUpperCase(),
                                name: operation.summary || operation.operationId || `${method.toUpperCase()} ${path}`,
                                url: basePath + path,
                                description: operation.description || '',
                                tags: operation.tags || []
                            });
                        }
                    });
                });
                
                importedApis = apis;
                showImportPreview();
                
            } catch (error) {
                alert('SwaggerÊñáÊ°£Ëß£ÊûêÂ§±Ë¥•Ôºö' + error.message);
            }
        }

        // Ëß£ÊûêPostman Collection
        function parsePostmanCollection(collection) {
            const apis = [];
            
            try {
                function parseItems(items, folderPath = '') {
                    items.forEach(item => {
                        if (item.item) {
                            // ËøôÊòØ‰∏Ä‰∏™Êñá‰ª∂Â§π
                            parseItems(item.item, folderPath + item.name + '/');
                        } else if (item.request) {
                            // ËøôÊòØ‰∏Ä‰∏™ËØ∑Ê±Ç
                            const request = item.request;
                            const url = typeof request.url === 'string' ? request.url : 
                                       (request.url.raw || request.url.protocol + '://' + request.url.host.join('.') + request.url.path.join('/'));
                            
                            apis.push({
                                method: request.method,
                                name: item.name,
                                url: url.replace(/{{.*?}}/g, ''), // ÁßªÈô§PostmanÂèòÈáè
                                description: item.request.description || '',
                                folder: folderPath
                            });
                        }
                    });
                }
                
                parseItems(collection.item || []);
                importedApis = apis;
                showImportPreview();
                
            } catch (error) {
                alert('Postman CollectionËß£ÊûêÂ§±Ë¥•Ôºö' + error.message);
            }
        }

        // Ëß£ÊûêJSONÂÜÖÂÆπ
        function parseJsonContent() {
            const jsonContent = document.getElementById('jsonEditor').value.trim();
            if (!jsonContent) {
                alert('ËØ∑ËæìÂÖ•JSONÂÜÖÂÆπ');
                return;
            }
            
            try {
                const data = JSON.parse(jsonContent);
                
                if (data.apis && Array.isArray(data.apis)) {
                    // Ëá™ÂÆö‰πâÊ†ºÂºè
                    importedApis = data.apis.map(api => ({
                        method: api.method || 'GET',
                        name: api.name || 'Unnamed API',
                        url: api.url || '/',
                        description: api.description || ''
                    }));
                } else if (data.paths) {
                    // SwaggerÊ†ºÂºè
                    parseSwaggerDoc(data);
                    return;
                } else if (data.item) {
                    // PostmanÊ†ºÂºè
                    parsePostmanCollection(data);
                    return;
                } else {
                    alert('‰∏çÊîØÊåÅÁöÑJSONÊ†ºÂºèÔºåËØ∑Ê£ÄÊü•Êï∞ÊçÆÁªìÊûÑ');
                    return;
                }
                
                showImportPreview();
                
            } catch (error) {
                alert('JSONËß£ÊûêÂ§±Ë¥•Ôºö' + error.message);
            }
        }

        // Ëé∑ÂèñÂú®Á∫øÊñáÊ°£
        function fetchOnlineDoc() {
            const url = document.getElementById('docUrl').value.trim();
            if (!url) {
                alert('ËØ∑ËæìÂÖ•ÊñáÊ°£URL');
                return;
            }
            
            // Áî±‰∫éCORSÈôêÂà∂ÔºåËøôÈáåÂè™ËÉΩÊ®°ÊãüËé∑Âèñ
            alert('Áî±‰∫éÊµèËßàÂô®CORSÈôêÂà∂ÔºåÊöÇ‰∏çÊîØÊåÅÁõ¥Êé•Ëé∑ÂèñÂú®Á∫øÊñáÊ°£„ÄÇËØ∑‰∏ãËΩΩÊñáÊ°£Êñá‰ª∂Âêé‰ΩøÁî®Êñá‰ª∂ÂØºÂÖ•ÂäüËÉΩ„ÄÇ');
            
            // ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåËøôÈáåÂ∫îËØ•ÈÄöËøáÂêéÁ´Ø‰ª£ÁêÜÊù•Ëé∑ÂèñÂú®Á∫øÊñáÊ°£
            /*
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.swagger || data.openapi) {
                        parseSwaggerDoc(data);
                    } else {
                        alert('‰∏çÊîØÊåÅÁöÑÊñáÊ°£Ê†ºÂºè');
                    }
                })
                .catch(error => {
                    alert('Ëé∑ÂèñÊñáÊ°£Â§±Ë¥•Ôºö' + error.message);
                });
            */
        }

        // ÊòæÁ§∫ÂØºÂÖ•È¢ÑËßà
        function showImportPreview() {
            if (importedApis.length === 0) {
                document.getElementById('importPreview').style.display = 'none';
                document.getElementById('confirmImportBtn').disabled = true;
                return;
            }
            
            document.getElementById('importPreview').style.display = 'block';
            document.getElementById('confirmImportBtn').disabled = false;
            
            // Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
            document.getElementById('previewStats').textContent = `${importedApis.length} ‰∏™Êé•Âè£`;
            
            // Ê∏≤ÊüìÊé•Âè£ÂàóË°®
            const previewApis = document.getElementById('previewApis');
            previewApis.innerHTML = importedApis.map(api => `
                <div class="preview-api-item">
                    <span class="preview-method method-${api.method.toLowerCase()}">${api.method}</span>
                    <div style="flex: 1;">
                        <div style="font-weight: bold; margin-bottom: 2px;">${api.name}</div>
                        <div style="color: #b0b0b0; font-size: 10px;">${api.url}</div>
                        ${api.description ? `<div style="color: #b0b0b0; font-size: 10px; margin-top: 2px;">${api.description}</div>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Á°ÆËÆ§ÂØºÂÖ•
        function confirmImport() {
            if (importedApis.length === 0) {
                alert('Ê≤°ÊúâÂèØÂØºÂÖ•ÁöÑÊé•Âè£');
                return;
            }
            
            // Â∞ÜÂØºÂÖ•ÁöÑÊé•Âè£Ê∑ªÂä†Âà∞ÂΩìÂâçÊ®°Âùó
            const module = moduleData[currentModule];
            const existingUrls = new Set(module.apis.map(api => api.url));
            
            let addedCount = 0;
            let duplicateCount = 0;
            
            importedApis.forEach(api => {
                if (!existingUrls.has(api.url)) {
                    module.apis.push({
                        method: api.method,
                        name: api.name,
                        url: api.url,
                        description: api.description || '',
                        // ÂØºÂÖ•ÁöÑÊé•Âè£ÈªòËÆ§‰∏∫Êú™ÂàÜÁ±ªÔºåÁî®Êà∑ÂèØ‰ª•ÂêéÁª≠ÁßªÂä®
                        categoryId: null
                    });
                    addedCount++;
                } else {
                    duplicateCount++;
                }
            });
            
            hideImportModal();
            renderContent();
            
            let message = `ÂØºÂÖ•ÂÆåÊàêÔºÅÊàêÂäüÊ∑ªÂä† ${addedCount} ‰∏™Êé•Âè£`;
            if (duplicateCount > 0) {
                message += `ÔºåË∑≥Ëøá ${duplicateCount} ‰∏™ÈáçÂ§çÊé•Âè£`;
            }
            message += '\nÂØºÂÖ•ÁöÑÊé•Âè£Â∑≤ÊîæÂÖ•"Êú™ÂàÜÁ±ª"ÔºåÊÇ®ÂèØ‰ª•ÈÄöËøá"ÁßªÂä®"ÂäüËÉΩÂ∞ÜÂÖ∂ÂàÜÈÖçÂà∞Áõ∏Â∫îÂàÜÁ±ª„ÄÇ';
            alert(message);
        }

        // AIÊô∫ËÉΩÂØºÂÖ•ÂäüËÉΩ
        let currentAiMethod = 'text';
        let aiDocumentContent = '';

        // ÂàáÊç¢AIËæìÂÖ•ÊñπÂºè
        function switchAiMethod(method) {
            currentAiMethod = method;
            
            // Êõ¥Êñ∞Ê†áÁ≠æÈ°µÁä∂ÊÄÅ
            document.querySelectorAll('.ai-method-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[onclick="switchAiMethod('${method}')"]`).classList.add('active');
            
            // Êõ¥Êñ∞ÂÜÖÂÆπÂå∫Âüü
            document.querySelectorAll('.ai-method-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`ai-${method}-method`).classList.add('active');
        }

        // Â§ÑÁêÜAIÊñáÊ°£Êñá‰ª∂‰∏ä‰º†
        function handleAiFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                processAiDocumentFile(file);
            }
        }

        // Â§ÑÁêÜAIÊñáÊ°£Êñá‰ª∂ÊãñÊãΩ
        function handleAiFileDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                processAiDocumentFile(files[0]);
            }
        }

        // Â§ÑÁêÜAIÊñáÊ°£Êñá‰ª∂
        function processAiDocumentFile(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                aiDocumentContent = e.target.result;
                alert(`ÊñáÊ°£Â∑≤‰∏ä‰º†Ôºö${file.name} (${(file.size / 1024).toFixed(1)} KB)`);
            };
            
            if (file.type.includes('text') || file.name.endsWith('.md') || file.name.endsWith('.txt')) {
                reader.readAsText(file);
            } else {
                alert('ÊöÇ‰∏çÊîØÊåÅËØ•Êñá‰ª∂Ê†ºÂºèÔºåËØ∑‰∏ä‰º†ÊñáÊú¨Êñá‰ª∂(.txt, .md)ÊàñÂ∞ÜÊñáÊ°£ÂÜÖÂÆπÂ§çÂà∂Âà∞ÊñáÊú¨ÊèèËø∞‰∏≠');
            }
        }

        // AIÁîüÊàêÊé•Âè£
        async function generateApisWithAI() {
            const model = document.getElementById('aiModelSelect').value;
            const apiKey = document.getElementById('aiApiKey').value.trim();
            
            if (!apiKey) {
                alert('ËØ∑ËæìÂÖ•APIÂØÜÈí•');
                return;
            }
            
            let inputContent = '';
            
            // Ê†πÊçÆÈÄâÊã©ÁöÑÊñπÂºèËé∑ÂèñËæìÂÖ•ÂÜÖÂÆπ
            switch (currentAiMethod) {
                case 'text':
                    inputContent = document.getElementById('aiDescription').value.trim();
                    if (!inputContent) {
                        alert('ËØ∑ÊèèËø∞ÊÇ®ÁöÑAPIÈúÄÊ±Ç');
                        return;
                    }
                    break;
                case 'file':
                    if (!aiDocumentContent) {
                        alert('ËØ∑ÂÖà‰∏ä‰º†ÊñáÊ°£Êñá‰ª∂');
                        return;
                    }
                    inputContent = aiDocumentContent;
                    break;
                case 'url':
                    const docUrl = document.getElementById('aiDocUrl').value.trim();
                    if (!docUrl) {
                        alert('ËØ∑ËæìÂÖ•ÊñáÊ°£URL');
                        return;
                    }
                    inputContent = `ËØ∑ÂàÜÊûêËøô‰∏™URLÁöÑAPIÊñáÊ°£Ôºö${docUrl}`;
                    break;
            }
            
            // Ëé∑ÂèñÈÄâÈ°π
            const includeExamples = document.getElementById('aiIncludeExamples').checked;
            const includeValidation = document.getElementById('aiIncludeValidation').checked;
            const includeErrorHandling = document.getElementById('aiIncludeErrorHandling').checked;
            
            // ÊòæÁ§∫ËøõÂ∫¶Êù°ÂíåÂä†ËΩΩÁä∂ÊÄÅ
            showAiProgress();
            const generateBtn = document.querySelector('.ai-generate-btn');
            generateBtn.classList.add('loading');
            generateBtn.disabled = true;
            
            try {
                // ÊûÑÂª∫AIÊèêÁ§∫ËØç
                const prompt = buildAiPrompt(inputContent, includeExamples, includeValidation, includeErrorHandling);
                
                // Ë∞ÉÁî®AI API
                updateAiProgress(20, 'Ê≠£Âú®ËøûÊé•AIÊúçÂä°...');
                const aiResponse = await callAiApi(model, apiKey, prompt);
                
                updateAiProgress(60, 'Ê≠£Âú®Ëß£ÊûêAIÂìçÂ∫î...');
                const parsedApis = parseAiResponse(aiResponse);
                
                updateAiProgress(80, 'Ê≠£Âú®ÁîüÊàêÊé•Âè£È¢ÑËßà...');
                
                if (parsedApis && parsedApis.length > 0) {
                    importedApis = parsedApis;
                    showImportPreview();
                    updateAiProgress(100, 'AIÁîüÊàêÂÆåÊàêÔºÅ');
                    
                    setTimeout(() => {
                        hideAiProgress();
                    }, 2000);
                } else {
                    throw new Error('AIÊú™ËÉΩÁîüÊàêÊúâÊïàÁöÑÊé•Âè£ÂÆö‰πâ');
                }
                
            } catch (error) {
                console.error('AIÁîüÊàêÂ§±Ë¥•:', error);
                alert('AIÁîüÊàêÂ§±Ë¥•Ôºö' + error.message);
                hideAiProgress();
            } finally {
                generateBtn.classList.remove('loading');
                generateBtn.disabled = false;
            }
        }

        // ÊûÑÂª∫AIÊèêÁ§∫ËØç
        function buildAiPrompt(inputContent, includeExamples, includeValidation, includeErrorHandling) {
            let prompt = `ËØ∑Ê†πÊçÆ‰ª•‰∏ãÈúÄÊ±ÇÁîüÊàêRESTful APIÊé•Âè£ÂÆö‰πâÔºåËøîÂõûJSONÊ†ºÂºèÔºö

ËæìÂÖ•ÂÜÖÂÆπÔºö
${inputContent}

Ë¶ÅÊ±ÇÔºö
1. ÁîüÊàêÊ†áÂáÜÁöÑRESTful APIÊé•Âè£
2. ÂåÖÂê´ÂêàÈÄÇÁöÑHTTPÊñπÊ≥ïÔºàGET, POST, PUT, DELETEÁ≠âÔºâ
3. URLË∑ØÂæÑË¶ÅÁ¨¶ÂêàRESTfulËßÑËåÉ
4. ÊØè‰∏™Êé•Âè£Ë¶ÅÊúâÊ∏ÖÊô∞ÁöÑÂêçÁß∞ÂíåÊèèËø∞`;

            if (includeExamples) {
                prompt += '\n5. ‰∏∫ÊØè‰∏™Êé•Âè£Êèê‰æõËØ∑Ê±ÇÂíåÂìçÂ∫îÁ§∫‰æã';
            }
            
            if (includeValidation) {
                prompt += '\n6. ÂåÖÂê´ÂèÇÊï∞È™åËØÅËßÑÂàô';
            }
            
            if (includeErrorHandling) {
                prompt += '\n7. ÂÆö‰πâÂ∏∏ËßÅÁöÑÈîôËØØÂìçÂ∫î';
            }

            prompt += `

ËØ∑‰∏•Ê†ºÊåâÁÖß‰ª•‰∏ãJSONÊ†ºÂºèËøîÂõûÔºå‰∏çË¶ÅÂåÖÂê´‰ªª‰ΩïÂÖ∂‰ªñÊñáÊú¨Ôºö
{
  "apis": [
    {
      "method": "GET",
      "name": "Êé•Âè£ÂêçÁß∞",
      "url": "/api/path",
      "description": "Êé•Âè£ÊèèËø∞"
    }
  ]
}`;

            return prompt;
        }

        // Ë∞ÉÁî®AI API
        async function callAiApi(model, apiKey, prompt) {
            // ËøôÈáåÊòØÊ®°ÊãüÁöÑAIË∞ÉÁî®ÔºåÂÆûÈôÖÈ°πÁõÆ‰∏≠ÈúÄË¶ÅÊ†πÊçÆ‰∏çÂêåÁöÑÊ®°ÂûãË∞ÉÁî®Áõ∏Â∫îÁöÑAPI
            // Áî±‰∫éÊµèËßàÂô®ÁöÑCORSÈôêÂà∂ÔºåÂÆûÈôÖÈ°πÁõÆ‰∏≠Â∫îËØ•ÈÄöËøáÂêéÁ´Ø‰ª£ÁêÜÊù•Ë∞ÉÁî®AI API
            
            return new Promise((resolve, reject) => {
                // Ê®°ÊãüAIÂ§ÑÁêÜÊó∂Èó¥
                setTimeout(() => {
                    // Ê®°ÊãüAIÂìçÂ∫î
                    const mockResponse = generateMockAiResponse(prompt);
                    resolve(mockResponse);
                }, 2000);
            });
        }

        // ÁîüÊàêÊ®°ÊãüAIÂìçÂ∫î
        function generateMockAiResponse(prompt) {
            // Ê†πÊçÆÊèêÁ§∫ËØçÁîüÊàêÊ®°ÊãüÁöÑAPIÊé•Âè£
            const mockApis = [
                {
                    method: "POST",
                    name: "Áî®Êà∑Ê≥®ÂÜå",
                    url: "/api/user/register",
                    description: "Áî®Êà∑Ê≥®ÂÜåÊé•Âè£ÔºåÂàõÂª∫Êñ∞Áî®Êà∑Ë¥¶Êà∑"
                },
                {
                    method: "POST",
                    name: "Áî®Êà∑ÁôªÂΩï",
                    url: "/api/user/login",
                    description: "Áî®Êà∑ÁôªÂΩïÊé•Âè£ÔºåÈ™åËØÅÁî®Êà∑Âá≠ÊçÆÂπ∂ËøîÂõûËÆøÈóÆ‰ª§Áâå"
                },
                {
                    method: "GET",
                    name: "Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ",
                    url: "/api/user/{id}",
                    description: "Ê†πÊçÆÁî®Êà∑IDËé∑ÂèñÁî®Êà∑ËØ¶ÁªÜ‰ø°ÊÅØ"
                },
                {
                    method: "PUT",
                    name: "Êõ¥Êñ∞Áî®Êà∑‰ø°ÊÅØ",
                    url: "/api/user/{id}",
                    description: "Êõ¥Êñ∞ÊåáÂÆöÁî®Êà∑ÁöÑ‰ø°ÊÅØ"
                },
                {
                    method: "DELETE",
                    name: "Âà†Èô§Áî®Êà∑",
                    url: "/api/user/{id}",
                    description: "Âà†Èô§ÊåáÂÆöÁöÑÁî®Êà∑Ë¥¶Êà∑"
                },
                {
                    method: "GET",
                    name: "Ëé∑ÂèñÁî®Êà∑ÂàóË°®",
                    url: "/api/users",
                    description: "Ëé∑ÂèñÁ≥ªÁªü‰∏≠ÊâÄÊúâÁî®Êà∑ÁöÑÂàóË°®ÔºåÊîØÊåÅÂàÜÈ°µÂíåÁ≠õÈÄâ"
                }
            ];
            
            return JSON.stringify({ apis: mockApis });
        }

        // Ëß£ÊûêAIÂìçÂ∫î
        function parseAiResponse(response) {
            try {
                const data = JSON.parse(response);
                if (data.apis && Array.isArray(data.apis)) {
                    return data.apis.map(api => ({
                        method: api.method || 'GET',
                        name: api.name || 'Unnamed API',
                        url: api.url || '/',
                        description: api.description || ''
                    }));
                }
                throw new Error('AIÂìçÂ∫îÊ†ºÂºè‰∏çÊ≠£Á°Æ');
            } catch (error) {
                throw new Error('Ëß£ÊûêAIÂìçÂ∫îÂ§±Ë¥•Ôºö' + error.message);
            }
        }

        // ÊòæÁ§∫AIËøõÂ∫¶
        function showAiProgress() {
            const progress = document.getElementById('aiProgress');
            progress.classList.add('show');
            updateAiProgress(0, 'Ê≠£Âú®ÂàùÂßãÂåñ...');
        }

        // Êõ¥Êñ∞AIËøõÂ∫¶
        function updateAiProgress(percent, text) {
            const progressText = document.getElementById('aiProgressText');
            const progressFill = document.getElementById('aiProgressFill');
            
            progressText.textContent = text;
            progressFill.style.width = percent + '%';
        }

        // ÈöêËóèAIËøõÂ∫¶
        function hideAiProgress() {
            const progress = document.getElementById('aiProgress');
            progress.classList.remove('show');
        }

        // ÂàÜÁ±ªÁÆ°ÁêÜÂáΩÊï∞
        
        // ÊòæÁ§∫ÂàÜÁ±ªÁÆ°ÁêÜÂô®
        function showCategoryManagerPanel() {
            showCategoryManager = true;
            editingCategory = null;
            renderContent();
        }

        // ÈöêËóèÂàÜÁ±ªÁÆ°ÁêÜÂô®
        function hideCategoryManagerPanel() {
            showCategoryManager = false;
            editingCategory = null;
            renderContent();
        }

        // Ê∏≤ÊüìÂàÜÁ±ªÂàóË°®
        function renderCategoryList(module) {
            if (!module.categories || module.categories.length === 0) {
                return '<div class="empty-state"><p>ÊöÇÊó†ÂàÜÁ±ªÔºåÁÇπÂáª"Êñ∞Âª∫ÂàÜÁ±ª"ÂºÄÂßãÂàõÂª∫</p></div>';
            }
            
            return module.categories.map(category => {
                const apiCount = module.apis.filter(api => api.categoryId === category.id).length;
                return `
                    <div class="category-card">
                        <div class="category-header">
                            <div class="category-name">${category.name}</div>
                            <div class="category-color" style="background-color: ${category.color}"></div>
                        </div>
                        <div class="category-description">${category.description}</div>
                        <div class="category-stats">${apiCount} ‰∏™Êé•Âè£</div>
                        <div class="category-actions">
                            <button class="category-btn edit" onclick="editCategory('${category.id}')">ÁºñËæë</button>
                            <button class="category-btn delete" onclick="deleteCategory('${category.id}')">Âà†Èô§</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Ê∏≤ÊüìÂàÜÁ±ªÁºñËæëÂô®
        function renderCategoryEditor() {
            const category = editingCategory;
            const isNew = !category || !category.id;
            
            return `
                <div class="category-editor">
                    <div class="api-list-header">
                        <h3 class="api-list-title">${isNew ? 'Êñ∞Âª∫ÂàÜÁ±ª' : 'ÁºñËæëÂàÜÁ±ª'}</h3>
                        <button class="btn btn-warning" onclick="cancelCategoryEdit()">ÂèñÊ∂à</button>
                    </div>
                    
                    <div class="scenario-form">
                        <div class="form-group">
                            <label>ÂàÜÁ±ªÂêçÁß∞</label>
                            <input type="text" class="form-input" id="categoryName" placeholder="ËØ∑ËæìÂÖ•ÂàÜÁ±ªÂêçÁß∞" value="${category ? category.name : ''}">
                        </div>
                        
                        <div class="form-group">
                            <label>ÂàÜÁ±ªÊèèËø∞</label>
                            <textarea class="form-input form-textarea" id="categoryDesc" placeholder="ËØ∑ËæìÂÖ•ÂàÜÁ±ªÊèèËø∞">${category ? category.description : ''}</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>ÂàÜÁ±ªÈ¢úËâ≤</label>
                            <div class="color-picker">
                                ${['#00d4ff', '#28a745', '#8000ff', '#ffc107', '#ff0080', '#20c997', '#fd7e14', '#6f42c1', '#dc3545', '#6c757d'].map(color => `
                                    <div class="color-option ${category && category.color === color ? 'selected' : ''}" 
                                         style="background-color: ${color}" 
                                         onclick="selectCategoryColor('${color}')"></div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <button class="btn btn-success" onclick="saveCategoryEdit()">‰øùÂ≠òÂàÜÁ±ª</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Ê∏≤ÊüìÂàÜÁ±ªÂåñÁöÑÊé•Âè£ÂàóË°®
        function renderCategorizedApiList(module) {
            const categories = module.categories || [];
            const apis = module.apis || [];
            
            let html = '';
            
            // ÊåâÂàÜÁ±ªÂàÜÁªÑÊé•Âè£
            categories.forEach(category => {
                const categoryApis = apis.filter(api => api.categoryId === category.id);
                if (categoryApis.length > 0) {
                    html += `
                        <div class="category-section" style="--category-color: ${category.color}">
                            <div class="category-section-header" onclick="toggleCategorySection('${category.id}')">
                                <div class="category-section-title">
                                    <div class="category-color" style="background-color: ${category.color}"></div>
                                    ${category.name} (${categoryApis.length})
                                </div>
                                <div class="category-section-toggle">‚ñº</div>
                            </div>
                            <div class="category-section-content">
                                ${categoryApis.map((api, index) => renderApiItem(api, `${category.id}_${index}`)).join('')}
                            </div>
                        </div>
                    `;
                }
            });
            
            // Êú™ÂàÜÁ±ªÁöÑÊé•Âè£
            const uncategorizedApis = apis.filter(api => !api.categoryId || !categories.find(cat => cat.id === api.categoryId));
            if (uncategorizedApis.length > 0) {
                html += `
                    <div class="category-section uncategorized-section">
                        <div class="category-section-header" onclick="toggleCategorySection('uncategorized')">
                            <div class="category-section-title">
                                <div class="category-color" style="background-color: #6c757d"></div>
                                Êú™ÂàÜÁ±ª (${uncategorizedApis.length})
                            </div>
                            <div class="category-section-toggle">‚ñº</div>
                        </div>
                        <div class="category-section-content">
                            ${uncategorizedApis.map((api, index) => renderApiItem(api, `uncategorized_${index}`)).join('')}
                        </div>
                    </div>
                `;
            }
            
            return html || '<div class="empty-state"><p>ÊöÇÊó†Êé•Âè£ÔºåÁÇπÂáª"ÂØºÂÖ•Êé•Âè£"ÂºÄÂßãÊ∑ªÂä†</p></div>';
        }

        // Ê∏≤ÊüìÂçï‰∏™Êé•Âè£È°π
        function renderApiItem(api, apiId) {
            return `
                <div class="api-item api-item-with-move" onclick="testApi('${api.name}')">
                    <span class="api-method method-${api.method.toLowerCase()}">${api.method}</span>
                    <div class="api-info">
                        <div class="api-name">${api.name}</div>
                        <div class="api-url">${api.url}</div>
                    </div>
                    <button class="api-move-btn" onclick="showMoveModal('${apiId}', event)">ÁßªÂä®</button>
                    <span class="api-status status-ready" id="status_${apiId}">Â∞±Áª™</span>
                </div>
            `;
        }

        // ÂàáÊç¢ÂàÜÁ±ªÂå∫ÂüüÂ±ïÂºÄ/Êî∂Ëµ∑
        function toggleCategorySection(categoryId) {
            const section = event.currentTarget.closest('.category-section');
            section.classList.toggle('collapsed');
        }

        // ÂàõÂª∫Êñ∞ÂàÜÁ±ª
        function createNewCategory() {
            editingCategory = {
                name: '',
                description: '',
                color: '#00d4ff'
            };
            renderContent();
        }

        // ÁºñËæëÂàÜÁ±ª
        function editCategory(categoryId) {
            const module = moduleData[currentModule];
            const category = module.categories.find(cat => cat.id === categoryId);
            if (category) {
                editingCategory = {...category};
                renderContent();
            }
        }

        // Âà†Èô§ÂàÜÁ±ª
        function deleteCategory(categoryId) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÂàÜÁ±ªÂêóÔºüÂàÜÁ±ª‰∏ãÁöÑÊé•Âè£Â∞ÜÁßªÂä®Âà∞"Êú™ÂàÜÁ±ª"„ÄÇ')) {
                const module = moduleData[currentModule];
                
                // ÁßªÈô§ÂàÜÁ±ª
                module.categories = module.categories.filter(cat => cat.id !== categoryId);
                
                // Â∞ÜËØ•ÂàÜÁ±ª‰∏ãÁöÑÊé•Âè£ÁßªÂä®Âà∞Êú™ÂàÜÁ±ª
                module.apis.forEach(api => {
                    if (api.categoryId === categoryId) {
                        delete api.categoryId;
                    }
                });
                
                renderContent();
                alert('ÂàÜÁ±ªÂà†Èô§ÊàêÂäüÔºÅ');
            }
        }

        // ÂèñÊ∂àÂàÜÁ±ªÁºñËæë
        function cancelCategoryEdit() {
            editingCategory = null;
            renderContent();
        }

        // ÈÄâÊã©ÂàÜÁ±ªÈ¢úËâ≤
        function selectCategoryColor(color) {
            if (editingCategory) {
                editingCategory.color = color;
                // Êõ¥Êñ∞È¢úËâ≤ÈÄâÊã©Âô®ÊòæÁ§∫
                document.querySelectorAll('.color-option').forEach(option => {
                    option.classList.remove('selected');
                });
                event.target.classList.add('selected');
            }
        }

        // ‰øùÂ≠òÂàÜÁ±ªÁºñËæë
        function saveCategoryEdit() {
            const name = document.getElementById('categoryName').value.trim();
            const description = document.getElementById('categoryDesc').value.trim();
            
            if (!name) {
                alert('ËØ∑ËæìÂÖ•ÂàÜÁ±ªÂêçÁß∞ÔºÅ');
                return;
            }
            
            const module = moduleData[currentModule];
            const isNew = !editingCategory.id;
            
            if (isNew) {
                // ÂàõÂª∫Êñ∞ÂàÜÁ±ª
                const newCategory = {
                    id: `${currentModule}_cat_${Date.now()}`,
                    name: name,
                    description: description,
                    color: editingCategory.color
                };
                
                if (!module.categories) {
                    module.categories = [];
                }
                module.categories.push(newCategory);
            } else {
                // Êõ¥Êñ∞Áé∞ÊúâÂàÜÁ±ª
                const categoryIndex = module.categories.findIndex(cat => cat.id === editingCategory.id);
                if (categoryIndex >= 0) {
                    module.categories[categoryIndex] = {
                        ...module.categories[categoryIndex],
                        name: name,
                        description: description,
                        color: editingCategory.color
                    };
                }
            }
            
            editingCategory = null;
            renderContent();
            alert('ÂàÜÁ±ª‰øùÂ≠òÊàêÂäüÔºÅ');
        }

        // ÊòæÁ§∫ÁßªÂä®Êé•Âè£Ê®°ÊÄÅÊ°Ü
        function showMoveModal(apiId, event) {
            event.stopPropagation();
            
            const module = moduleData[currentModule];
            const api = findApiById(apiId);
            
            if (!api) {
                alert('Êé•Âè£‰∏çÂ≠òÂú®ÔºÅ');
                return;
            }
            
            selectedApiForMove = { apiId, api };
            
            // ËÆæÁΩÆÊé•Âè£ÂêçÁß∞
            document.getElementById('moveApiName').textContent = api.name;
            
            // Ê∏≤ÊüìÂàÜÁ±ªÂàóË°®
            renderMoveCategoryList(module);
            
            // ÊòæÁ§∫Ê®°ÊÄÅÊ°Ü
            document.getElementById('moveModal').style.display = 'flex';
        }

        // ÈöêËóèÁßªÂä®Êé•Âè£Ê®°ÊÄÅÊ°Ü
        function hideMoveModal() {
            document.getElementById('moveModal').style.display = 'none';
            selectedApiForMove = null;
            document.getElementById('confirmMoveBtn').disabled = true;
        }

        // Ê∏≤ÊüìÁßªÂä®ÂàÜÁ±ªÂàóË°®
        function renderMoveCategoryList(module) {
            const categories = module.categories || [];
            const moveCategoryList = document.getElementById('moveCategoryList');
            
            let html = '';
            
            // Ê∑ªÂä†"Êú™ÂàÜÁ±ª"ÈÄâÈ°π
            html += `
                <div class="move-category-item" onclick="selectMoveCategory(null)">
                    <div class="category-color" style="background-color: #6c757d"></div>
                    <div style="margin-left: 10px;">
                        <div style="font-weight: bold;">Êú™ÂàÜÁ±ª</div>
                        <div style="font-size: 12px; color: #b0b0b0;">ÁßªÂä®Âà∞Êú™ÂàÜÁ±ª</div>
                    </div>
                </div>
            `;
            
            // Ê∑ªÂä†Áé∞ÊúâÂàÜÁ±ª
            categories.forEach(category => {
                html += `
                    <div class="move-category-item" onclick="selectMoveCategory('${category.id}')">
                        <div class="category-color" style="background-color: ${category.color}"></div>
                        <div style="margin-left: 10px;">
                            <div style="font-weight: bold;">${category.name}</div>
                            <div style="font-size: 12px; color: #b0b0b0;">${category.description}</div>
                        </div>
                    </div>
                `;
            });
            
            moveCategoryList.innerHTML = html;
        }

        // ÈÄâÊã©ÁßªÂä®ÁõÆÊ†áÂàÜÁ±ª
        function selectMoveCategory(categoryId) {
            // Êõ¥Êñ∞ÈÄâÊã©Áä∂ÊÄÅ
            document.querySelectorAll('.move-category-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // ÂêØÁî®Á°ÆËÆ§ÊåâÈíÆ
            document.getElementById('confirmMoveBtn').disabled = false;
            
            // ‰øùÂ≠òÈÄâÊã©ÁöÑÂàÜÁ±ªID
            selectedApiForMove.targetCategoryId = categoryId;
        }

        // Á°ÆËÆ§ÁßªÂä®Êé•Âè£
        function confirmMoveApi() {
            if (!selectedApiForMove) {
                alert('Ê≤°ÊúâÈÄâÊã©Ë¶ÅÁßªÂä®ÁöÑÊé•Âè£ÔºÅ');
                return;
            }
            
            const module = moduleData[currentModule];
            const api = findApiById(selectedApiForMove.apiId);
            
            if (!api) {
                alert('Êé•Âè£‰∏çÂ≠òÂú®ÔºÅ');
                return;
            }
            
            // Êõ¥Êñ∞Êé•Âè£ÁöÑÂàÜÁ±ªID
            if (selectedApiForMove.targetCategoryId) {
                api.categoryId = selectedApiForMove.targetCategoryId;
            } else {
                delete api.categoryId; // ÁßªÂä®Âà∞Êú™ÂàÜÁ±ª
            }
            
            hideMoveModal();
            renderContent();
            
            const targetCategoryName = selectedApiForMove.targetCategoryId ? 
                module.categories.find(cat => cat.id === selectedApiForMove.targetCategoryId)?.name : 'Êú™ÂàÜÁ±ª';
            alert(`Êé•Âè£"${api.name}"Â∑≤ÁßªÂä®Âà∞"${targetCategoryName}"ÔºÅ`);
        }

        // Ê†πÊçÆIDÊü•ÊâæÊé•Âè£
        function findApiById(apiId) {
            const module = moduleData[currentModule];
            const apis = module.apis || [];
            
            // Ëß£ÊûêapiId
            const parts = apiId.split('_');
            if (parts.length < 2) return null;
            
            const categoryId = parts[0];
            const index = parseInt(parts[1]);
            
            if (categoryId === 'uncategorized') {
                // Êú™ÂàÜÁ±ªÊé•Âè£
                const uncategorizedApis = apis.filter(api => !api.categoryId || !module.categories?.find(cat => cat.id === api.categoryId));
                return uncategorizedApis[index];
            } else {
                // ÂàÜÁ±ªÊé•Âè£
                const categoryApis = apis.filter(api => api.categoryId === categoryId);
                return categoryApis[index];
            }
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            initSampleScenarios();
            renderContent();
        });
    </script>
</body>
</html> 