/* empty css             *//* empty css                 *//* empty css                  */import{d as L,u as S,a as P,b as U,r as c,c as j,o as b,e as y,f as s,w as t,g as o,h as a,t as V,i as E,j as $,F as K,k as I,l as M,m as Y,E as R,n as G}from"./index-7a753478.js";import{E as H}from"./el-card-d5a120bc.js";import{E as z,_ as D}from"./_plugin-vue_export-helper-4445a987.js";import{E as J,a as O,b as Q,c as W}from"./index-a6bfc29c.js";import"./event-9519ab40.js";import"./refs-08e124bd.js";const X={key:0,class:"debug-auth"},Z={style:{display:"flex","justify-content":"space-between","align-items":"center"}},h={class:"debug-info"},ee={class:"debug-actions"},le={key:1,class:"debug-trigger"},oe=L({__name:"DebugAuth",setup(T){const x=S();P();const i=U(),p=c(!1),_=j(()=>localStorage.getItem("token")),d=()=>{location.reload()},u=()=>{i.logout(),localStorage.removeItem("token"),x.push("/login")},v=()=>{x.push("/dashboard")};return(w,l)=>{const g=z,A=H;return b(),y(K,null,[p.value?(b(),y("div",X,[s(A,null,{header:t(()=>[o("div",Z,[l[3]||(l[3]=o("span",null,"è®¤è¯çŠ¶æ€è°ƒè¯•",-1)),s(g,{type:"text",onClick:l[0]||(l[0]=k=>p.value=!1)},{default:t(()=>l[2]||(l[2]=[a("Ã—")])),_:1,__:[2]})])]),default:t(()=>[o("div",h,[o("p",null,[l[4]||(l[4]=o("strong",null,"å½“å‰è·¯ç”±:",-1)),a(" "+V(w.$route.path),1)]),o("p",null,[l[5]||(l[5]=o("strong",null,"è®¤è¯çŠ¶æ€:",-1)),a(" "+V(E(i).isAuthenticated?"å·²è®¤è¯":"æœªè®¤è¯"),1)]),o("p",null,[l[6]||(l[6]=o("strong",null,"Tokenå­˜åœ¨:",-1)),a(" "+V(E(i).token?"æ˜¯":"å¦"),1)]),o("p",null,[l[7]||(l[7]=o("strong",null,"ç”¨æˆ·ä¿¡æ¯:",-1)),a(" "+V(E(i).user?E(i).user.username:"æ— "),1)]),o("p",null,[l[8]||(l[8]=o("strong",null,"LocalStorage Token:",-1)),a(" "+V(_.value?"å­˜åœ¨":"ä¸å­˜åœ¨"),1)]),o("div",ee,[s(g,{size:"small",onClick:d},{default:t(()=>l[9]||(l[9]=[a("åˆ·æ–°è®¤è¯çŠ¶æ€")])),_:1,__:[9]}),s(g,{size:"small",onClick:u},{default:t(()=>l[10]||(l[10]=[a("æ¸…é™¤è®¤è¯")])),_:1,__:[10]}),s(g,{size:"small",onClick:v},{default:t(()=>l[11]||(l[11]=[a("è·³è½¬ä»ªè¡¨ç›˜")])),_:1,__:[11]})])])]),_:1})])):$("",!0),p.value?$("",!0):(b(),y("div",le,[s(g,{type:"primary",size:"small",circle:"",onClick:l[1]||(l[1]=k=>p.value=!0),title:"æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯"},{default:t(()=>l[12]||(l[12]=[a(" ðŸ” ")])),_:1,__:[12]})]))],64)}}});const se=D(oe,[["__scopeId","data-v-605a9943"]]),te={class:"login-container"},re={class:"login-wrapper"},ae={class:"login-form-container cyber-container"},ne={key:0},ue={key:1},ie={class:"login-footer"},de={class:"dialog-footer"},me=L({__name:"Login",setup(T){const x=S(),i=U(),p=c(),_=c(),d=I({username:"admin123",password:"admin123"}),u=I({username:"",email:"",full_name:"",password:""}),v=c(!1),w=c(!1),l=c(!1),g={username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"},{min:3,max:20,message:"ç”¨æˆ·åé•¿åº¦åœ¨ 3 åˆ° 20 ä¸ªå­—ç¬¦",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äºŽ 6 ä¸ªå­—ç¬¦",trigger:"blur"}]},A={username:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å",trigger:"blur"},{min:3,max:20,message:"ç”¨æˆ·åé•¿åº¦åœ¨ 3 åˆ° 20 ä¸ªå­—ç¬¦",trigger:"blur"}],email:[{required:!0,message:"è¯·è¾“å…¥é‚®ç®±",trigger:"blur"},{type:"email",message:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äºŽ 6 ä¸ªå­—ç¬¦",trigger:"blur"}]},k=async()=>{var m,e;if(p.value)try{await p.value.validate(),v.value=!0,console.log("å¼€å§‹ç™»å½•æµç¨‹..."),await i.login(d),console.log("ç™»å½•æˆåŠŸï¼Œè®¤è¯çŠ¶æ€:",i.isAuthenticated),console.log("Token:",i.token),R.success("ç™»å½•æˆåŠŸ"),await new Promise(n=>setTimeout(n,200)),console.log("å‡†å¤‡è·³è½¬..."),await x.replace("/dashboard"),console.log("è·³è½¬å®Œæˆ")}catch(n){console.error("Login error:",n),R.error(((e=(m=n.response)==null?void 0:m.data)==null?void 0:e.detail)||"ç™»å½•å¤±è´¥")}finally{v.value=!1}},q=async()=>{var m,e;if(_.value)try{await _.value.validate(),w.value=!0,await G.register(u),R.success("æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•"),l.value=!1,d.username=u.username}catch(n){console.error("Register error:",n),R.error(((e=(m=n.response)==null?void 0:m.data)==null?void 0:e.detail)||"æ³¨å†Œå¤±è´¥")}finally{w.value=!1}},B=()=>{var m;l.value=!1,(m=_.value)==null||m.resetFields()};return(m,e)=>{const n=Q,f=W,C=z,F=J,N=O;return b(),y("div",te,[s(se),e[16]||(e[16]=o("div",{class:"particles"},null,-1)),o("div",re,[o("div",ae,[e[13]||(e[13]=o("div",{class:"login-header"},[o("h1",{class:"login-title neon-text"},"âš¡ CYBER API"),o("p",{class:"login-subtitle typewriter"},"ä¸‹ä¸€ä»£APIæµ‹è¯•æŽ§åˆ¶ä¸­å¿ƒ"),o("div",{class:"subtitle-glow"})],-1)),s(F,{ref_key:"loginFormRef",ref:p,model:d,rules:g,class:"login-form",onSubmit:M(k,["prevent"])},{default:t(()=>[s(f,{prop:"username"},{default:t(()=>[s(n,{modelValue:d.username,"onUpdate:modelValue":e[0]||(e[0]=r=>d.username=r),placeholder:"ç”¨æˆ·å",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),s(f,{prop:"password"},{default:t(()=>[s(n,{modelValue:d.password,"onUpdate:modelValue":e[1]||(e[1]=r=>d.password=r),type:"password",placeholder:"å¯†ç ",size:"large","prefix-icon":"Lock","show-password":"",onKeyup:Y(k,["enter"])},null,8,["modelValue"])]),_:1}),s(f,null,{default:t(()=>[s(C,{type:"primary",size:"large",class:"login-button cyber-button pulse",loading:v.value,onClick:k},{default:t(()=>[v.value?(b(),y("span",ne,e[9]||(e[9]=[o("i",{class:"loading-cyber"},null,-1),a(" ç³»ç»ŸéªŒè¯ä¸­... ")]))):(b(),y("span",ue," ðŸ” å¯åŠ¨ç³»ç»Ÿ "))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",ie,[o("p",null,[e[11]||(e[11]=a(" éœ€è¦è®¿é—®æƒé™ï¼Ÿ ")),s(C,{type:"text",class:"register-link neon-text-secondary",onClick:e[2]||(e[2]=r=>l.value=!0)},{default:t(()=>e[10]||(e[10]=[a(" ç”³è¯·æƒé™ â†’ ")])),_:1,__:[10]})]),e[12]||(e[12]=o("div",{class:"access-info"},[o("p",{class:"access-tip"},"ðŸ”’ å®‰å…¨è¿žæŽ¥å·²å»ºç«‹"),o("p",{class:"access-tip"},"âš¡ é‡å­åŠ å¯†ä¼ è¾“")],-1))])])]),s(N,{modelValue:l.value,"onUpdate:modelValue":e[8]||(e[8]=r=>l.value=r),title:"ç”¨æˆ·æ³¨å†Œ",width:"400px","before-close":B},{footer:t(()=>[o("span",de,[s(C,{onClick:e[7]||(e[7]=r=>l.value=!1)},{default:t(()=>e[14]||(e[14]=[a("å–æ¶ˆ")])),_:1,__:[14]}),s(C,{type:"primary",loading:w.value,onClick:q},{default:t(()=>e[15]||(e[15]=[a(" æ³¨å†Œ ")])),_:1,__:[15]},8,["loading"])])]),default:t(()=>[s(F,{ref_key:"registerFormRef",ref:_,model:u,rules:A,"label-width":"80px"},{default:t(()=>[s(f,{label:"ç”¨æˆ·å",prop:"username"},{default:t(()=>[s(n,{modelValue:u.username,"onUpdate:modelValue":e[3]||(e[3]=r=>u.username=r)},null,8,["modelValue"])]),_:1}),s(f,{label:"é‚®ç®±",prop:"email"},{default:t(()=>[s(n,{modelValue:u.email,"onUpdate:modelValue":e[4]||(e[4]=r=>u.email=r),type:"email"},null,8,["modelValue"])]),_:1}),s(f,{label:"å§“å",prop:"full_name"},{default:t(()=>[s(n,{modelValue:u.full_name,"onUpdate:modelValue":e[5]||(e[5]=r=>u.full_name=r)},null,8,["modelValue"])]),_:1}),s(f,{label:"å¯†ç ",prop:"password"},{default:t(()=>[s(n,{modelValue:u.password,"onUpdate:modelValue":e[6]||(e[6]=r=>u.password=r),type:"password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const ke=D(me,[["__scopeId","data-v-4cfa0fa5"]]);export{ke as default};
