/* empty css             */import{p as E,v as Q,E as Y}from"./api-6da0f383.js";/* empty css                 *//* empty css                  */import{E as Z,a as tt,b as et}from"./el-dropdown-item-f5812d6d.js";import{d as st,r as m,k as A,c as B,R as ot,e as y,g as e,h as r,f as s,w as a,t as c,X as at,F as lt,at as nt,j as it,u as dt,E as _,o as w,i as k,au as rt,av as ut,ay as ct,az as mt,l as pt,W as vt}from"./index-7a753478.js";import{E as _t,_ as ft}from"./_plugin-vue_export-helper-4445a987.js";import{a as gt,b as yt,c as wt,E as xt}from"./index-a6bfc29c.js";import"./refs-08e124bd.js";import"./index-01aab8da.js";import"./event-9519ab40.js";const Vt={class:"project-page"},bt={class:"page-header"},jt={class:"stats-grid"},Ct={class:"stat-card"},Et={class:"stat-content"},kt={class:"stat-value"},It={class:"stat-card"},Pt={class:"stat-content"},Dt={class:"stat-value"},Ft={class:"stat-card"},$t={class:"stat-content"},Bt={class:"stat-value"},Rt={class:"projects-container"},Mt={class:"section-title"},Ut={class:"count"},Nt={class:"project-grid"},Tt=["onClick"],At={class:"project-header"},Lt={class:"project-info"},zt={class:"project-name"},St={class:"project-desc"},qt={class:"project-stats"},Ot={class:"stat-item"},Wt={class:"stat-text"},Xt={class:"stat-item"},ht={class:"stat-text"},Gt={class:"stat-item"},Ht={class:"stat-text"},Jt={class:"project-footer"},Kt={class:"create-time"},Qt={key:0,class:"empty-state"},Yt=st({__name:"Index",setup(Zt){const L=dt(),x=m(!1),I=m(!1),P=m(!1),f=m(!1),g=m(!1),u=m([]),D=m(null),V=m(),F=m(),v=A({name:"",description:""}),p=A({name:"",description:""}),R={name:[{required:!0,message:"è¯·è¾“å…¥é¡¹ç›®åç§°",trigger:"blur"},{min:1,max:100,message:"é¡¹ç›®åç§°é•¿åº¦åœ¨ 1 åˆ° 100 ä¸ªå­—ç¬¦",trigger:"blur"}]},z=B(()=>{var l;return((l=u.value)==null?void 0:l.length)||0}),S=B(()=>{var l;return((l=u.value)==null?void 0:l.reduce((t,n)=>t+n.module_count,0))||0}),q=B(()=>{var l;return((l=u.value)==null?void 0:l.reduce((t,n)=>t+n.api_count,0))||0}),b=async()=>{try{x.value=!0;const l=await E.getProjects();u.value=l.data||l||[],console.log("è·å–é¡¹ç›®åˆ—è¡¨:",u.value)}catch(l){console.error("è·å–é¡¹ç›®åˆ—è¡¨å¤±è´¥:",l),_.error("è·å–é¡¹ç›®åˆ—è¡¨å¤±è´¥"),u.value=[]}finally{x.value=!1}},O=async()=>{var t,n,i;if(!(!V.value||!await V.value.validate()))try{I.value=!0,await E.createProject(v),_.success("é¡¹ç›®åˆ›å»ºæˆåŠŸ"),f.value=!1,Object.assign(v,{name:"",description:""}),(t=V.value)==null||t.resetFields(),await b()}catch(d){console.error("åˆ›å»ºé¡¹ç›®å¤±è´¥:",d),_.error(((i=(n=d.response)==null?void 0:n.data)==null?void 0:i.detail)||"åˆ›å»ºé¡¹ç›®å¤±è´¥")}finally{I.value=!1}},W=async()=>{var t,n;if(!(!F.value||!D.value||!await F.value.validate()))try{P.value=!0,await E.updateProject(D.value,p),_.success("é¡¹ç›®æ›´æ–°æˆåŠŸ"),g.value=!1,await b()}catch(i){console.error("æ›´æ–°é¡¹ç›®å¤±è´¥:",i),_.error(((n=(t=i.response)==null?void 0:t.data)==null?void 0:n.detail)||"æ›´æ–°é¡¹ç›®å¤±è´¥")}finally{P.value=!1}},X=async(l,t)=>{var n,i;try{await Y.confirm(`ç¡®å®šè¦åˆ é™¤é¡¹ç›®"${t}"å—ï¼Ÿåˆ é™¤åå°†æ— æ³•æ¢å¤ï¼ŒåŒ…æ‹¬å…¶ä¸‹çš„æ‰€æœ‰æ¨¡å—ã€åˆ†ç±»å’Œæ¥å£ï¼`,"âš ï¸ åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®šåˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning",confirmButtonClass:"danger-confirm"}),await E.deleteProject(l),_.success("é¡¹ç›®åˆ é™¤æˆåŠŸ"),await b()}catch(d){d!=="cancel"&&(console.error("åˆ é™¤é¡¹ç›®å¤±è´¥:",d),_.error(((i=(n=d.response)==null?void 0:n.data)==null?void 0:i.detail)||"åˆ é™¤é¡¹ç›®å¤±è´¥"))}},h=l=>{L.push(`/projects/${l}`)},G=l=>{const[t,n]=l.split("-"),i=parseInt(n),d=u.value.find($=>$.id===i);d&&(t==="edit"?(D.value=i,p.name=d.name,p.description=d.description||"",g.value=!0):t==="delete"&&X(i,d.name))},H=l=>new Date(l).toLocaleDateString("zh-CN",{year:"numeric",month:"numeric",day:"numeric"});return ot(()=>{b()}),(l,t)=>{var N,T;const n=vt,i=_t,d=Z,$=tt,J=et,j=yt,C=wt,M=xt,U=gt,K=Q;return w(),y("div",Vt,[e("div",bt,[t[12]||(t[12]=e("h1",{class:"page-title"},[e("span",{class:"icon"},"ğŸ—ï¸"),r(" é¡¹ç›®ä¸­å¿ƒ "),e("span",{class:"subtitle"},"Project Control Center")],-1)),s(i,{type:"primary",class:"create-btn",onClick:t[0]||(t[0]=o=>f.value=!0)},{default:a(()=>[s(n,null,{default:a(()=>[s(k(rt))]),_:1}),t[11]||(t[11]=r(" æ–°å»ºé¡¹ç›® "))]),_:1,__:[11]})]),e("div",jt,[e("div",Ct,[t[14]||(t[14]=e("div",{class:"stat-icon"},"ğŸ“Š",-1)),e("div",Et,[e("div",kt,c(z.value),1),t[13]||(t[13]=e("div",{class:"stat-label"},"æ€»é¡¹ç›®æ•°",-1))])]),e("div",It,[t[16]||(t[16]=e("div",{class:"stat-icon"},"ğŸ”§",-1)),e("div",Pt,[e("div",Dt,c(S.value),1),t[15]||(t[15]=e("div",{class:"stat-label"},"æ€»æ¨¡å—æ•°",-1))])]),e("div",Ft,[t[18]||(t[18]=e("div",{class:"stat-icon"},"ğŸ”—",-1)),e("div",$t,[e("div",Bt,c(q.value),1),t[17]||(t[17]=e("div",{class:"stat-label"},"æ€»æ¥å£æ•°",-1))])])]),e("div",Rt,[e("div",Mt,[t[19]||(t[19]=e("span",{class:"icon"},"ğŸ“",-1)),t[20]||(t[20]=r(" é¡¹ç›®åˆ—è¡¨ ")),e("span",Ut,"("+c(((N=u.value)==null?void 0:N.length)||0)+")",1)]),at((w(),y("div",Nt,[(w(!0),y(lt,null,nt(u.value,o=>(w(),y("div",{key:o.id,class:"project-card",onClick:te=>h(o.id)},[e("div",At,[e("div",Lt,[e("h3",zt,c(o.name),1),e("p",St,c(o.description||"æš‚æ— æè¿°"),1)]),s(J,{onCommand:G,trigger:"click",onClick:t[1]||(t[1]=pt(()=>{},["stop"]))},{dropdown:a(()=>[s($,null,{default:a(()=>[s(d,{command:`edit-${o.id}`},{default:a(()=>[s(n,null,{default:a(()=>[s(k(ut))]),_:1}),t[21]||(t[21]=r(" ç¼–è¾‘é¡¹ç›® "))]),_:2,__:[21]},1032,["command"]),s(d,{command:`delete-${o.id}`,divided:"",class:"danger-item"},{default:a(()=>[s(n,null,{default:a(()=>[s(k(ct))]),_:1}),t[22]||(t[22]=r(" åˆ é™¤é¡¹ç›® "))]),_:2,__:[22]},1032,["command"])]),_:2},1024)]),default:a(()=>[s(n,{class:"more-icon"},{default:a(()=>[s(k(mt))]),_:1})]),_:2},1024)]),e("div",qt,[e("div",Ot,[t[23]||(t[23]=e("span",{class:"stat-icon"},"ğŸ”§",-1)),e("span",Wt,c(o.module_count)+" ä¸ªæ¨¡å—",1)]),e("div",Xt,[t[24]||(t[24]=e("span",{class:"stat-icon"},"ğŸ“‚",-1)),e("span",ht,c(o.category_count)+" ä¸ªåˆ†ç±»",1)]),e("div",Gt,[t[25]||(t[25]=e("span",{class:"stat-icon"},"ğŸ”—",-1)),e("span",Ht,c(o.api_count)+" ä¸ªæ¥å£",1)])]),e("div",Jt,[e("span",Kt," åˆ›å»ºäº "+c(H(o.created_at)),1),t[26]||(t[26]=e("div",{class:"project-status"},[e("span",{class:"status-dot"}),r(" æ´»è·ƒ ")],-1))])],8,Tt))),128)),(((T=u.value)==null?void 0:T.length)||0)===0&&!x.value?(w(),y("div",Qt,[t[28]||(t[28]=e("div",{class:"empty-icon"},"ğŸš€",-1)),t[29]||(t[29]=e("div",{class:"empty-title"},"è¿˜æ²¡æœ‰é¡¹ç›®",-1)),t[30]||(t[30]=e("div",{class:"empty-desc"},"åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªé¡¹ç›®å¼€å§‹ç®¡ç†API",-1)),s(i,{type:"primary",onClick:t[2]||(t[2]=o=>f.value=!0)},{default:a(()=>t[27]||(t[27]=[r(" ç«‹å³åˆ›å»º ")])),_:1,__:[27]})])):it("",!0)])),[[K,x.value]])]),s(U,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=o=>f.value=o),title:"ğŸš€ æ–°å»ºé¡¹ç›®",width:"500px",class:"cyber-dialog"},{footer:a(()=>[s(i,{onClick:t[5]||(t[5]=o=>f.value=!1)},{default:a(()=>t[31]||(t[31]=[r("å–æ¶ˆ")])),_:1,__:[31]}),s(i,{type:"primary",onClick:O,loading:I.value},{default:a(()=>t[32]||(t[32]=[r(" åˆ›å»ºé¡¹ç›® ")])),_:1,__:[32]},8,["loading"])]),default:a(()=>[s(M,{model:v,rules:R,ref_key:"formRef",ref:V,"label-width":"80px",class:"cyber-form"},{default:a(()=>[s(C,{label:"é¡¹ç›®åç§°",prop:"name"},{default:a(()=>[s(j,{modelValue:v.name,"onUpdate:modelValue":t[3]||(t[3]=o=>v.name=o),placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(C,{label:"é¡¹ç›®æè¿°",prop:"description"},{default:a(()=>[s(j,{modelValue:v.description,"onUpdate:modelValue":t[4]||(t[4]=o=>v.description=o),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥é¡¹ç›®æè¿°ï¼ˆå¯é€‰ï¼‰",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(U,{modelValue:g.value,"onUpdate:modelValue":t[10]||(t[10]=o=>g.value=o),title:"âœï¸ ç¼–è¾‘é¡¹ç›®",width:"500px",class:"cyber-dialog"},{footer:a(()=>[s(i,{onClick:t[9]||(t[9]=o=>g.value=!1)},{default:a(()=>t[33]||(t[33]=[r("å–æ¶ˆ")])),_:1,__:[33]}),s(i,{type:"primary",onClick:W,loading:P.value},{default:a(()=>t[34]||(t[34]=[r(" ä¿å­˜æ›´æ”¹ ")])),_:1,__:[34]},8,["loading"])]),default:a(()=>[s(M,{model:p,rules:R,ref_key:"editFormRef",ref:F,"label-width":"80px",class:"cyber-form"},{default:a(()=>[s(C,{label:"é¡¹ç›®åç§°",prop:"name"},{default:a(()=>[s(j,{modelValue:p.name,"onUpdate:modelValue":t[7]||(t[7]=o=>p.name=o),placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(C,{label:"é¡¹ç›®æè¿°",prop:"description"},{default:a(()=>[s(j,{modelValue:p.description,"onUpdate:modelValue":t[8]||(t[8]=o=>p.description=o),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥é¡¹ç›®æè¿°ï¼ˆå¯é€‰ï¼‰",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const me=ft(Yt,[["__scopeId","data-v-f520cf90"]]);export{me as default};
