import{aQ as ie,r as y,bp as q,R as K,S as B,aZ as j,D as se,_ as oe,d as re,Q as de,P as I,i as b,a5 as fe,s as U,a8 as X,V as le,J as Ee,a0 as ve,o as pe,q as Te,c1 as be,y as me,a7 as w,bf as D,b7 as _e}from"./index-7a753478.js";function Ye(){if(!arguments.length)return[];var e=arguments[0];return ie(e)?e:[e]}const Se='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Ae=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,$e=e=>Array.from(e.querySelectorAll(Se)).filter(t=>ue(t)&&Ae(t)),ue=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},ge=function(e,t,...s){let n;t.includes("mouse")||t.includes("click")?n="MouseEvents":t.includes("key")?n="KeyboardEvent":n="HTMLEvents";const u=document.createEvent(n);return u.initEvent(t,...s),e.dispatchEvent(u),e},k="focus-trap.focus-after-trapped",P="focus-trap.focus-after-released",ye="focus-trap.focusout-prevented",J={cancelable:!0,bubbles:!1},Le={cancelable:!0,bubbles:!1},Q="focusAfterTrapped",W="focusAfterReleased",Ne=Symbol("elFocusTrap"),M=y(),L=y(0),x=y(0);let m=0;const ae=e=>{const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const u=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||u?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t},Z=(e,t)=>{for(const s of e)if(!Re(s,t))return s},Re=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Ce=e=>{const t=ae(e),s=Z(t,e),n=Z(t.reverse(),e);return[s,n]},Fe=e=>e instanceof HTMLInputElement&&"select"in e,l=(e,t)=>{if(e&&e.focus){const s=document.activeElement;let n=!1;q(e)&&!ue(e)&&!e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),n=!0),e.focus({preventScroll:!0}),x.value=window.performance.now(),e!==s&&Fe(e)&&t&&e.select(),q(e)&&n&&e.removeAttribute("tabindex")}};function z(e,t){const s=[...e],n=e.indexOf(t);return n!==-1&&s.splice(n,1),s}const Oe=()=>{let e=[];return{push:n=>{const u=e[0];u&&n!==u&&u.pause(),e=z(e,n),e.unshift(n)},remove:n=>{var u,d;e=z(e,n),(d=(u=e[0])==null?void 0:u.resume)==null||d.call(u)}}},Ie=(e,t=!1)=>{const s=document.activeElement;for(const n of e)if(l(n,t),document.activeElement!==s)return},ee=Oe(),we=()=>L.value>x.value,_=()=>{M.value="pointer",L.value=window.performance.now()},te=()=>{M.value="keyboard",L.value=window.performance.now()},De=()=>(K(()=>{m===0&&(document.addEventListener("mousedown",_),document.addEventListener("touchstart",_),document.addEventListener("keydown",te)),m++}),B(()=>{m--,m<=0&&(document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_),document.removeEventListener("keydown",te))}),{focusReason:M,lastUserFocusTimestamp:L,lastAutomatedFocusTimestamp:x}),S=e=>new CustomEvent(ye,{...Le,detail:e});let v=[];const ne=e=>{e.code===se.esc&&v.forEach(t=>t(e))},ke=e=>{K(()=>{v.length===0&&document.addEventListener("keydown",ne),j&&v.push(e)}),B(()=>{v=v.filter(t=>t!==e),v.length===0&&j&&document.removeEventListener("keydown",ne)})},Pe=re({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Q,W,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const s=y();let n,u;const{focusReason:d}=De();ke(o=>{e.trapped&&!E.paused&&t("release-requested",o)});const E={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},p=o=>{if(!e.loop&&!e.trapped||E.paused)return;const{code:r,altKey:a,ctrlKey:c,metaKey:i,currentTarget:g,shiftKey:h}=o,{loop:G}=e,ce=r===se.tab&&!a&&!c&&!i,T=document.activeElement;if(ce&&T){const C=g,[F,O]=Ce(C);if(F&&O){if(!h&&T===O){const f=S({focusReason:d.value});t("focusout-prevented",f),f.defaultPrevented||(o.preventDefault(),G&&l(F,!0))}else if(h&&[F,C].includes(T)){const f=S({focusReason:d.value});t("focusout-prevented",f),f.defaultPrevented||(o.preventDefault(),G&&l(O,!0))}}else if(T===C){const f=S({focusReason:d.value});t("focusout-prevented",f),f.defaultPrevented||o.preventDefault()}}};de(Ne,{focusTrapRef:s,onKeydown:p}),I(()=>e.focusTrapEl,o=>{o&&(s.value=o)},{immediate:!0}),I([s],([o],[r])=>{o&&(o.addEventListener("keydown",p),o.addEventListener("focusin",N),o.addEventListener("focusout",R)),r&&(r.removeEventListener("keydown",p),r.removeEventListener("focusin",N),r.removeEventListener("focusout",R))});const H=o=>{t(Q,o)},V=o=>t(W,o),N=o=>{const r=b(s);if(!r)return;const a=o.target,c=o.relatedTarget,i=a&&r.contains(a);e.trapped||c&&r.contains(c)||(n=c),i&&t("focusin",o),!E.paused&&e.trapped&&(i?u=a:l(u,!0))},R=o=>{const r=b(s);if(!(E.paused||!r))if(e.trapped){const a=o.relatedTarget;!fe(a)&&!r.contains(a)&&setTimeout(()=>{if(!E.paused&&e.trapped){const c=S({focusReason:d.value});t("focusout-prevented",c),c.defaultPrevented||l(u,!0)}},0)}else{const a=o.target;a&&r.contains(a)||t("focusout",o)}};async function Y(){await X();const o=b(s);if(o){ee.push(E);const r=o.contains(document.activeElement)?n:document.activeElement;if(n=r,!o.contains(r)){const c=new Event(k,J);o.addEventListener(k,H),o.dispatchEvent(c),c.defaultPrevented||X(()=>{let i=e.focusStartEl;le(i)||(l(i),document.activeElement!==i&&(i="first")),i==="first"&&Ie(ae(o),!0),(document.activeElement===r||i==="container")&&l(o)})}}}function $(){const o=b(s);if(o){o.removeEventListener(k,H);const r=new CustomEvent(P,{...J,detail:{focusReason:d.value}});o.addEventListener(P,V),o.dispatchEvent(r),!r.defaultPrevented&&(d.value=="keyboard"||!we()||o.contains(document.activeElement))&&l(n??document.body),o.removeEventListener(P,V),ee.remove(E)}}return K(()=>{e.trapped&&Y(),I(()=>e.trapped,o=>{o?Y():$()})}),B(()=>{e.trapped&&$(),s.value&&(s.value.removeEventListener("keydown",p),s.value.removeEventListener("focusin",N),s.value.removeEventListener("focusout",R),s.value=void 0)}),{onKeydown:p}}});function Ue(e,t,s,n,u,d){return U(e.$slots,"default",{handleKeydown:e.onKeydown})}var he=oe(Pe,[["render",Ue],["__file","focus-trap.vue"]]);const Ke=Ee({to:{type:ve([String,Object]),required:!0},disabled:Boolean}),Be=re({__name:"teleport",props:Ke,setup(e){return(t,s)=>t.disabled?U(t.$slots,"default",{key:0}):(pe(),Te(be,{key:1,to:t.to},[U(t.$slots,"default")],8,["to"]))}});var Me=oe(Be,[["__file","teleport.vue"]]);const Ge=me(Me);var xe=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(xe||{});const A=e=>{const t=w(e)?e:[e],s=[];return t.forEach(n=>{var u;w(n)?s.push(...A(n)):D(n)&&((u=n.component)!=null&&u.subTree)?s.push(n,...A(n.component.subTree)):D(n)&&w(n.children)?s.push(...A(n.children)):D(n)&&n.shapeFlag===2?s.push(...A(n.type())):s.push(n)}),s},qe=(...e)=>t=>{e.forEach(s=>{_e(s)?s(t):s.value=t})};export{he as E,Ne as F,xe as P,qe as a,Ke as b,Ye as c,Ge as d,l as e,A as f,ue as i,$e as o,ge as t};
